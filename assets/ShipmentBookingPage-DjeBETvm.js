import{j as e}from"./ui-BUgdJNRx.js";import{b as t,d as n,u as r,r as a,L as i}from"./vendor-D4-GdBKu.js";import{c as s,L as l,a as o,u as c,C as d,b as u,T as m,d as p,e as f,B as h,I as g,f as x,g as v,h as y,N as b,i as j,P as w,j as N,k as S,l as k,m as z,t as C}from"./index-CBxeTJu1.js";import{s as D,D as I,g as P,a as L}from"./labelService-BBzGUmre.js";import{S as E,a as M,b as A,c as $,d as F}from"./select-DfQ8u67M.js";import{t as R,s as _,e as B,i as H,a as O,f as T,C as G,b as J,c as U,d as V}from"./calendar-B3iiXHxd.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=s("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Y={},q=async e=>{try{if(!e.pickup||!e.delivery)return{success:!1,message:"Pickup and delivery addresses are required"};if(!e.userId)return{success:!1,message:"User ID is required"};const r=`SHIP-${Math.floor(1e6*Math.random())}`,a=`EP${Math.floor(1e7*Math.random())}FI`;let i=(t=e.carrier.price,n=e.includeCompliance,t+(n?2:0));if(e.poolingEnabled&&e.deliveryDate){i-=i*.15}const s=`https://api.shipping.com/labels/${a}`,l=new Date;l.setHours(l.getHours()+2);const o=l.toISOString();let c=new Date;"express"===e.deliverySpeed?c.setDate(c.getDate()+1):"standard"===e.deliverySpeed?c.setDate(c.getDate()+3):c.setDate(c.getDate()+5),e.poolingEnabled&&e.deliveryDate&&(c=new Date(e.deliveryDate));const d=c.toISOString(),u=new Date;u.setHours(u.getHours()+24);const m={id:r,tracking_code:a,user_id:e.userId,status:"pending",sender_address:"string"==typeof e.pickup?e.pickup:JSON.stringify(e.pickup),recipient_address:"string"==typeof e.delivery?e.delivery:JSON.stringify(e.delivery),package_weight:e.weight,package_dimensions:`${e.dimensions.length}x${e.dimensions.width}x${e.dimensions.height}`,carrier_name:e.carrier.name,total_price:i,cancellation_deadline:u.toISOString(),can_be_cancelled:!0,delivery_speed:e.deliverySpeed,compliance_included:e.includeCompliance,created_at:(new Date).toISOString(),shipment_id:r,customerType:e.customerType||"private",businessName:e.businessName,vatNumber:e.vatNumber,pooling_enabled:e.poolingEnabled||!1,delivery_date:e.deliveryDate};Y[a]=m;await D(e,a,s,o,i,d,u);await new Promise((e=>setTimeout(e,1500)));const p=JSON.parse(localStorage.getItem(`bookings_${e.userId}`)||"[]");return p.push(m),localStorage.setItem(`bookings_${e.userId}`,JSON.stringify(p)),{success:!0,message:"Shipment booked successfully",shipmentId:r,trackingCode:a,totalPrice:i,cancellationDeadline:u.toISOString(),canBeCancelled:!0}}catch(r){return{success:!1,message:"Failed to book shipment"}}var t,n},K=({value:t,onChange:n})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"label-language",className:"text-sm font-medium",children:"Label Language"}),e.jsxs(E,{value:t,onValueChange:n,children:[e.jsx(M,{id:"label-language",className:"w-full bg-background border-input",children:e.jsx(A,{placeholder:"Select language"})}),e.jsxs($,{children:[e.jsx(F,{value:"en",children:"English"}),e.jsx(F,{value:"fi",children:"Finnish"}),e.jsx(F,{value:"sv",children:"Swedish"}),e.jsx(F,{value:"no",children:"Norwegian"}),e.jsx(F,{value:"da",children:"Danish"})]})]})]}),{createElement:X,createContext:Z,createRef:Q,forwardRef:ee,useCallback:te,useContext:ne,useEffect:re,useImperativeHandle:ae,useLayoutEffect:ie,useMemo:se,useRef:le,useState:oe}=t,ce=t[`useId${Math.random()}`.slice(0,5)],de=ie,ue=Z(null);ue.displayName="PanelGroupContext";const me=de,pe="function"==typeof ce?ce:()=>null;let fe=0;function he(e=null){const t=pe(),n=le(e||t||null);return null===n.current&&(n.current=""+fe++),null!=e?e:n.current}function ge({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:a,forwardedRef:i,id:s,maxSize:l,minSize:o,onCollapse:c,onExpand:d,onResize:u,order:m,style:p,tagName:f="div",...h}){const g=ne(ue);if(null===g)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:x,expandPanel:v,getPanelSize:y,getPanelStyle:b,groupId:j,isPanelCollapsed:w,reevaluatePanelConstraints:N,registerPanel:S,resizePanel:k,unregisterPanel:z}=g,C=he(s),D=le({callbacks:{onCollapse:c,onExpand:d,onResize:u},constraints:{collapsedSize:n,collapsible:r,defaultSize:a,maxSize:l,minSize:o},id:C,idIsFromProps:void 0!==s,order:m});le({didLogMissingDefaultSizeWarning:!1}),me((()=>{const{callbacks:e,constraints:t}=D.current,i={...t};D.current.id=C,D.current.idIsFromProps=void 0!==s,D.current.order=m,e.onCollapse=c,e.onExpand=d,e.onResize=u,t.collapsedSize=n,t.collapsible=r,t.defaultSize=a,t.maxSize=l,t.minSize=o,i.collapsedSize===t.collapsedSize&&i.collapsible===t.collapsible&&i.maxSize===t.maxSize&&i.minSize===t.minSize||N(D.current,i)})),me((()=>{const e=D.current;return S(e),()=>{z(e)}}),[m,C,S,z]),ae(i,(()=>({collapse:()=>{x(D.current)},expand:e=>{v(D.current,e)},getId:()=>C,getSize:()=>y(D.current),isCollapsed:()=>w(D.current),isExpanded:()=>!w(D.current),resize:e=>{k(D.current,e)}})),[x,v,y,w,C,k]);const I=b(D.current,a);return X(f,{...h,children:e,className:t,id:s,style:{...I,...p},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":j,"data-panel-id":C,"data-panel-size":parseFloat(""+I.flexGrow).toFixed(1)})}const xe=ee(((e,t)=>X(ge,{...e,forwardedRef:t})));ge.displayName="Panel",xe.displayName="forwardRef(Panel)";let ve=null,ye=null;function be(e,t){const n=function(e,t){if(t){const e=!!(t&Me),n=!!(t&Ae);if(t&Le)return e?"se-resize":n?"ne-resize":"e-resize";if(t&Ee)return e?"sw-resize":n?"nw-resize":"w-resize";if(e)return"s-resize";if(n)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,t);ve!==n&&(ve=n,null===ye&&(ye=document.createElement("style"),document.head.appendChild(ye)),ye.innerHTML=`*{cursor: ${n}!important;}`)}function je(e){return"keydown"===e.type}function we(e){return e.type.startsWith("pointer")}function Ne(e){return e.type.startsWith("mouse")}function Se(e){if(we(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Ne(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}const ke=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function ze(e){const t=getComputedStyle(e);return"fixed"===t.position||(!("auto"===t.zIndex||"static"===t.position&&!function(e){var t;const n=getComputedStyle(null!==(t=Pe(e))&&void 0!==t?t:e).display;return"flex"===n||"inline-flex"===n}(e))||(+t.opacity<1||("transform"in t&&"none"!==t.transform||("webkitTransform"in t&&"none"!==t.webkitTransform||("mixBlendMode"in t&&"normal"!==t.mixBlendMode||("filter"in t&&"none"!==t.filter||("webkitFilter"in t&&"none"!==t.webkitFilter||("isolation"in t&&"isolate"===t.isolation||(!!ke.test(t.willChange)||"touch"===t.webkitOverflowScrolling)))))))))}function Ce(e){let t=e.length;for(;t--;){const n=e[t];if(qe(n,"Missing node"),ze(n))return n}return null}function De(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Ie(e){const t=[];for(;e;)t.push(e),e=Pe(e);return t}function Pe(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const Le=1,Ee=2,Me=4,Ae=8,$e="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}();let Fe=[],Re=!1,_e=new Map,Be=new Map;const He=new Set;function Oe(e){const{target:t}=e,{x:n,y:r}=Se(e);Re=!0,Je({target:t,x:n,y:r}),We(),Fe.length>0&&(Ye("down",e),e.preventDefault(),e.stopPropagation())}function Te(e){const{x:t,y:n}=Se(e);if(Re&&0===e.buttons&&(Re=!1,Ye("up",e)),!Re){const{target:r}=e;Je({target:r,x:t,y:n})}Ye("move",e),Ve(),Fe.length>0&&e.preventDefault()}function Ge(e){const{target:t}=e,{x:n,y:r}=Se(e);Be.clear(),Re=!1,Fe.length>0&&e.preventDefault(),Ye("up",e),Je({target:t,x:n,y:r}),Ve(),We()}function Je({target:e,x:t,y:n}){Fe.splice(0);let r=null;e instanceof HTMLElement&&(r=e),He.forEach((e=>{const{element:a,hitAreaMargins:i}=e,s=a.getBoundingClientRect(),{bottom:l,left:o,right:c,top:d}=s,u=$e?i.coarse:i.fine;if(t>=o-u&&t<=c+u&&n>=d-u&&n<=l+u){if(null!==r&&document.contains(r)&&a!==r&&!a.contains(r)&&!r.contains(a)&&function(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:Ie(e),b:Ie(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;qe(r,"Stacking order can only be calculated for elements with a common ancestor");const a=De(Ce(n.a)),i=De(Ce(n.b));if(a===i){const e=r.childNodes,t={a:n.a.at(-1),b:n.b.at(-1)};let a=e.length;for(;a--;){const n=e[a];if(n===t.a)return 1;if(n===t.b)return-1}}return Math.sign(a-i)}(r,a)>0){let e=r,t=!1;for(;e&&!e.contains(a);){if(m=e.getBoundingClientRect(),p=s,m.x<p.x+p.width&&m.x+m.width>p.x&&m.y<p.y+p.height&&m.y+m.height>p.y){t=!0;break}e=e.parentElement}if(t)return}Fe.push(e)}var m,p}))}function Ue(e,t){Be.set(e,t)}function Ve(){let e=!1,t=!1;Fe.forEach((n=>{const{direction:r}=n;"horizontal"===r?e=!0:t=!0}));let n=0;Be.forEach((e=>{n|=e})),e&&t?be("intersection",n):e?be("horizontal",n):t?be("vertical",n):null!==ye&&(document.head.removeChild(ye),ve=null,ye=null)}function We(){_e.forEach(((e,t)=>{const{body:n}=t;n.removeEventListener("contextmenu",Ge),n.removeEventListener("pointerdown",Oe),n.removeEventListener("pointerleave",Te),n.removeEventListener("pointermove",Te)})),window.removeEventListener("pointerup",Ge),window.removeEventListener("pointercancel",Ge),He.size>0&&(Re?(Fe.length>0&&_e.forEach(((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("contextmenu",Ge),n.addEventListener("pointerleave",Te),n.addEventListener("pointermove",Te))})),window.addEventListener("pointerup",Ge),window.addEventListener("pointercancel",Ge)):_e.forEach(((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("pointerdown",Oe,{capture:!0}),n.addEventListener("pointermove",Te))})))}function Ye(e,t){He.forEach((n=>{const{setResizeHandlerState:r}=n,a=Fe.includes(n);r(e,a,t)}))}function qe(e,t){if(!e)throw Error(t)}function Ke(e,t,n=10){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Xe(e,t,n=10){return 0===Ke(e,t,n)}function Ze(e,t,n){return 0===Ke(e,t,n)}function Qe({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];qe(null!=r,`Panel constraints not found for index ${t}`);let{collapsedSize:a=0,collapsible:i,maxSize:s=100,minSize:l=0}=r;if(Ke(n,l)<0)if(i){n=Ke(n,(a+l)/2)<0?a:l}else n=l;return n=Math.min(s,n),n=parseFloat(n.toFixed(10))}function et({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:a,trigger:i}){if(Ze(e,0))return t;const s=[...t],[l,o]=r;qe(null!=l,"Invalid first pivot index"),qe(null!=o,"Invalid second pivot index");let c=0;if("keyboard"===i){{const r=e<0?o:l,a=n[r];qe(a,`Panel constraints not found for index ${r}`);const{collapsedSize:i=0,collapsible:s,minSize:c=0}=a;if(s){const n=t[r];if(qe(null!=n,`Previous layout not found for panel index ${r}`),Ze(n,i)){const t=c-n;Ke(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}{const r=e<0?l:o,a=n[r];qe(a,`No panel constraints found for index ${r}`);const{collapsedSize:i=0,collapsible:s,minSize:c=0}=a;if(s){const n=t[r];if(qe(null!=n,`Previous layout not found for panel index ${r}`),Ze(n,c)){const t=n-i;Ke(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}}{const r=e<0?1:-1;let a=e<0?o:l,i=0;for(;;){const e=t[a];qe(null!=e,`Previous layout not found for panel index ${a}`);if(i+=Qe({panelConstraints:n,panelIndex:a,size:100})-e,a+=r,a<0||a>=n.length)break}const s=Math.min(Math.abs(e),Math.abs(i));e=e<0?0-s:s}{let r=e<0?l:o;for(;r>=0&&r<n.length;){const a=Math.abs(e)-Math.abs(c),i=t[r];qe(null!=i,`Previous layout not found for panel index ${r}`);const l=Qe({panelConstraints:n,panelIndex:r,size:i-a});if(!Ze(i,l)&&(c+=i-l,s[r]=l,c.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?r--:r++}}if(function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Ze(e[r],t[r],n))return!1;return!0}(a,s))return a;{const r=e<0?o:l,a=t[r];qe(null!=a,`Previous layout not found for panel index ${r}`);const i=a+c,d=Qe({panelConstraints:n,panelIndex:r,size:i});if(s[r]=d,!Ze(d,i)){let t=i-d;let r=e<0?o:l;for(;r>=0&&r<n.length;){const a=s[r];qe(null!=a,`Previous layout not found for panel index ${r}`);const i=Qe({panelConstraints:n,panelIndex:r,size:a+t});if(Ze(a,i)||(t-=i-a,s[r]=i),Ze(t,0))break;e>0?r--:r++}}}return Ze(s.reduce(((e,t)=>t+e),0),100)?s:a}function tt({layout:e,panelsArray:t,pivotIndices:n}){let r=0,a=100,i=0,s=0;const l=n[0];qe(null!=l,"No pivot index found"),t.forEach(((e,t)=>{const{constraints:n}=e,{maxSize:o=100,minSize:c=0}=n;t===l?(r=c,a=o):(i+=c,s+=o)}));return{valueMax:Math.min(a,100-i),valueMin:Math.max(r,100-s),valueNow:e[l]}}function nt(e,t=document){return Array.from(t.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function rt(e,t,n=document){const r=nt(e,n).findIndex((e=>e.getAttribute("data-panel-resize-handle-id")===t));return null!=r?r:null}function at(e,t,n){const r=rt(e,t,n);return null!=r?[r,r+1]:[-1,-1]}function it(e,t=document){var n;if(t instanceof HTMLElement&&(null==t||null===(n=t.dataset)||void 0===n?void 0:n.panelGroupId)==e)return t;const r=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function st(e,t=document){const n=t.querySelector(`[data-panel-resize-handle-id="${e}"]`);return n||null}function lt({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:a,panelGroupElement:i,setLayout:s}){le({didWarnAboutMissingResizeHandle:!1}),me((()=>{if(!i)return;const e=nt(n,i);for(let t=0;t<a.length-1;t++){const{valueMax:n,valueMin:i,valueNow:s}=tt({layout:r,panelsArray:a,pivotIndices:[t,t+1]}),l=e[t];if(null==l);else{const e=a[t];qe(e,`No panel data found for index "${t}"`),l.setAttribute("aria-controls",e.id),l.setAttribute("aria-valuemax",""+Math.round(n)),l.setAttribute("aria-valuemin",""+Math.round(i)),l.setAttribute("aria-valuenow",null!=s?""+Math.round(s):"")}}return()=>{e.forEach(((e,t)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")}))}}),[n,r,a,i]),re((()=>{if(!i)return;const e=t.current;qe(e,"Eager values not found");const{panelDataArray:a}=e;qe(null!=it(n,i),`No group found for id "${n}"`);const l=nt(n,i);qe(l,`No resize handles found for group id "${n}"`);const o=l.map((e=>{const t=e.getAttribute("data-panel-resize-handle-id");qe(t,"Resize handle element has no handle id attribute");const[l,o]=function(e,t,n,r=document){var a,i,s,l;const o=st(t,r),c=nt(e,r),d=o?c.indexOf(o):-1;return[null!==(a=null===(i=n[d])||void 0===i?void 0:i.id)&&void 0!==a?a:null,null!==(s=null===(l=n[d+1])||void 0===l?void 0:l.id)&&void 0!==s?s:null]}(n,t,a,i);if(null==l||null==o)return()=>{};const c=e=>{if(!e.defaultPrevented)switch(e.key){case"Enter":{e.preventDefault();const o=a.findIndex((e=>e.id===l));if(o>=0){const e=a[o];qe(e,`No panel data found for index ${o}`);const l=r[o],{collapsedSize:c=0,collapsible:d,minSize:u=0}=e.constraints;if(null!=l&&d){const e=et({delta:Ze(l,c)?u-c:c-l,initialLayout:r,panelConstraints:a.map((e=>e.constraints)),pivotIndices:at(n,t,i),prevLayout:r,trigger:"keyboard"});r!==e&&s(e)}}break}}};return e.addEventListener("keydown",c),()=>{e.removeEventListener("keydown",c)}}));return()=>{o.forEach((e=>e()))}}),[i,e,t,n,r,a,s])}function ot(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ct(e,t){const n="horizontal"===e,{x:r,y:a}=Se(t);return n?r:a}function dt(e,t,n,r,a,i){if(je(e)){const t="horizontal"===n;let r=0;r=e.shiftKey?100:null!=a?a:10;let i=0;switch(e.key){case"ArrowDown":i=t?0:r;break;case"ArrowLeft":i=t?-r:0;break;case"ArrowRight":i=t?r:0;break;case"ArrowUp":i=t?0:-r;break;case"End":i=100;break;case"Home":i=-100}return i}return null==r?0:function(e,t,n,r,a){const i="horizontal"===n,s=st(t,a);qe(s,`No resize handle element found for id "${t}"`);const l=s.getAttribute("data-panel-group-id");qe(l,"Resize handle element has no group id attribute");let{initialCursorPosition:o}=r;const c=ct(n,e),d=it(l,a);qe(d,`No group element found for id "${l}"`);const u=d.getBoundingClientRect();return(c-o)/(i?u.width:u.height)*100}(e,t,n,r,i)}function ut(e,t,n){t.forEach(((t,r)=>{const a=e[r];qe(a,`Panel data not found for index ${r}`);const{callbacks:i,constraints:s,id:l}=a,{collapsedSize:o=0,collapsible:c}=s,d=n[l];if(null==d||t!==d){n[l]=t;const{onCollapse:e,onExpand:r,onResize:a}=i;a&&a(t,d),c&&(e||r)&&(!r||null!=d&&!Xe(d,o)||Xe(t,o)||r(),!e||null!=d&&Xe(d,o)||!Xe(t,o)||e())}}))}function mt(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function pt(e){try{if("undefined"==typeof localStorage)throw new Error("localStorage not supported in this environment");e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)}}catch(t){e.getItem=()=>null,e.setItem=()=>{}}}function ft(e){return`react-resizable-panels:${e}`}function ht(e){return e.map((e=>{const{constraints:t,id:n,idIsFromProps:r,order:a}=e;return r?n:a?`${a}:${JSON.stringify(t)}`:JSON.stringify(t)})).sort(((e,t)=>e.localeCompare(t))).join(",")}function gt(e,t){try{const n=ft(e),r=t.getItem(n);if(r){const e=JSON.parse(r);if("object"==typeof e&&null!=e)return e}}catch(n){}return null}function xt(e,t,n,r,a){var i;const s=ft(e),l=ht(t),o=null!==(i=gt(e,a))&&void 0!==i?i:{};o[l]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{a.setItem(s,JSON.stringify(o))}catch(c){}}function vt({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce(((e,t)=>e+t),0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map((e=>`${e}%`)).join(", ")}`);if(!Ze(r,100)&&n.length>0)for(let i=0;i<t.length;i++){const e=n[i];qe(null!=e,`No layout data found for index ${i}`);const t=100/r*e;n[i]=t}let a=0;for(let i=0;i<t.length;i++){const e=n[i];qe(null!=e,`No layout data found for index ${i}`);const r=Qe({panelConstraints:t,panelIndex:i,size:e});e!=r&&(a+=e-r,n[i]=r)}if(!Ze(a,0))for(let i=0;i<t.length;i++){const e=n[i];qe(null!=e,`No layout data found for index ${i}`);const r=Qe({panelConstraints:t,panelIndex:i,size:e+a});if(e!==r&&(a-=r-e,n[i]=r,Ze(a,0)))break}return n}const yt={getItem:e=>(pt(yt),yt.getItem(e)),setItem:(e,t)=>{pt(yt),yt.setItem(e,t)}},bt={};function jt({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:a,id:i=null,onLayout:s=null,keyboardResizeBy:l=null,storage:o=yt,style:c,tagName:d="div",...u}){const m=he(i),p=le(null),[f,h]=oe(null),[g,x]=oe([]),v=function(){const[e,t]=oe(0);return te((()=>t((e=>e+1))),[])}(),y=le({}),b=le(new Map),j=le(0),w=le({autoSaveId:e,direction:r,dragState:f,id:m,keyboardResizeBy:l,onLayout:s,storage:o}),N=le({layout:g,panelDataArray:[],panelDataArrayChanged:!1});le({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),ae(a,(()=>({getId:()=>w.current.id,getLayout:()=>{const{layout:e}=N.current;return e},setLayout:e=>{const{onLayout:t}=w.current,{layout:n,panelDataArray:r}=N.current,a=vt({layout:e,panelConstraints:r.map((e=>e.constraints))});ot(n,a)||(x(a),N.current.layout=a,t&&t(a),ut(r,a,y.current))}})),[]),me((()=>{w.current.autoSaveId=e,w.current.direction=r,w.current.dragState=f,w.current.id=m,w.current.onLayout=s,w.current.storage=o})),lt({committedValuesRef:w,eagerValuesRef:N,groupId:m,layout:g,panelDataArray:N.current.panelDataArray,setLayout:x,panelGroupElement:p.current}),re((()=>{const{panelDataArray:t}=N.current;if(e){if(0===g.length||g.length!==t.length)return;let n=bt[e];null==n&&(n=function(e,t=10){let n=null;return(...r)=>{null!==n&&clearTimeout(n),n=setTimeout((()=>{e(...r)}),t)}}(xt,100),bt[e]=n);const r=[...t],a=new Map(b.current);n(e,r,a,g,o)}}),[e,g,o]),re((()=>{}));const S=te((e=>{const{onLayout:t}=w.current,{layout:n,panelDataArray:r}=N.current;if(e.constraints.collapsible){const a=r.map((e=>e.constraints)),{collapsedSize:i=0,panelSize:s,pivotIndices:l}=St(r,e,n);if(qe(null!=s,`Panel size not found for panel "${e.id}"`),!Xe(s,i)){b.current.set(e.id,s);const o=et({delta:Nt(r,e)===r.length-1?s-i:i-s,initialLayout:n,panelConstraints:a,pivotIndices:l,prevLayout:n,trigger:"imperative-api"});mt(n,o)||(x(o),N.current.layout=o,t&&t(o),ut(r,o,y.current))}}}),[]),k=te(((e,t)=>{const{onLayout:n}=w.current,{layout:r,panelDataArray:a}=N.current;if(e.constraints.collapsible){const i=a.map((e=>e.constraints)),{collapsedSize:s=0,panelSize:l=0,minSize:o=0,pivotIndices:c}=St(a,e,r),d=null!=t?t:o;if(Xe(l,s)){const t=b.current.get(e.id),s=null!=t&&t>=d?t:d,o=et({delta:Nt(a,e)===a.length-1?l-s:s-l,initialLayout:r,panelConstraints:i,pivotIndices:c,prevLayout:r,trigger:"imperative-api"});mt(r,o)||(x(o),N.current.layout=o,n&&n(o),ut(a,o,y.current))}}}),[]),z=te((e=>{const{layout:t,panelDataArray:n}=N.current,{panelSize:r}=St(n,e,t);return qe(null!=r,`Panel size not found for panel "${e.id}"`),r}),[]),C=te(((e,t)=>{const{panelDataArray:n}=N.current,r=Nt(n,e);return function({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:a,precision:i=3}){const s=n[a];let l;return l=null==s?null!=e?e.toPrecision(i):"1":1===r.length?"1":s.toPrecision(i),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:null!==t?"none":void 0}}({defaultSize:t,dragState:f,layout:g,panelData:n,panelIndex:r})}),[f,g]),D=te((e=>{const{layout:t,panelDataArray:n}=N.current,{collapsedSize:r=0,collapsible:a,panelSize:i}=St(n,e,t);return qe(null!=i,`Panel size not found for panel "${e.id}"`),!0===a&&Xe(i,r)}),[]),I=te((e=>{const{layout:t,panelDataArray:n}=N.current,{collapsedSize:r=0,collapsible:a,panelSize:i}=St(n,e,t);return qe(null!=i,`Panel size not found for panel "${e.id}"`),!a||Ke(i,r)>0}),[]),P=te((e=>{const{panelDataArray:t}=N.current;t.push(e),t.sort(((e,t)=>{const n=e.order,r=t.order;return null==n&&null==r?0:null==n?-1:null==r?1:n-r})),N.current.panelDataArrayChanged=!0,v()}),[v]);me((()=>{if(N.current.panelDataArrayChanged){N.current.panelDataArrayChanged=!1;const{autoSaveId:e,onLayout:t,storage:n}=w.current,{layout:r,panelDataArray:a}=N.current;let i=null;if(e){const t=function(e,t,n){var r,a;return null!==(a=(null!==(r=gt(e,n))&&void 0!==r?r:{})[ht(t)])&&void 0!==a?a:null}(e,a,n);t&&(b.current=new Map(Object.entries(t.expandToSizes)),i=t.layout)}null==i&&(i=function({panelDataArray:e}){const t=Array(e.length),n=e.map((e=>e.constraints));let r=0,a=100;for(let i=0;i<e.length;i++){const e=n[i];qe(e,`Panel constraints not found for index ${i}`);const{defaultSize:s}=e;null!=s&&(r++,t[i]=s,a-=s)}for(let i=0;i<e.length;i++){const s=n[i];qe(s,`Panel constraints not found for index ${i}`);const{defaultSize:l}=s;if(null!=l)continue;const o=a/(e.length-r);r++,t[i]=o,a-=o}return t}({panelDataArray:a}));const s=vt({layout:i,panelConstraints:a.map((e=>e.constraints))});ot(r,s)||(x(s),N.current.layout=s,t&&t(s),ut(a,s,y.current))}})),me((()=>{const e=N.current;return()=>{e.layout=[]}}),[]);const L=te((e=>function(t){t.preventDefault();const n=p.current;if(!n)return()=>null;const{direction:r,dragState:a,id:i,keyboardResizeBy:s,onLayout:l}=w.current,{layout:o,panelDataArray:c}=N.current,{initialLayout:d}=null!=a?a:{},u=at(i,e,n);let m=dt(t,e,r,a,s,n);const f="horizontal"===r;"rtl"===document.dir&&f&&(m=-m);const h=et({delta:m,initialLayout:null!=d?d:o,panelConstraints:c.map((e=>e.constraints)),pivotIndices:u,prevLayout:o,trigger:je(t)?"keyboard":"mouse-or-touch"}),g=!mt(o,h);(we(t)||Ne(t))&&j.current!=m&&(j.current=m,Ue(e,g||0===m?0:f?m<0?Le:Ee:m<0?Me:Ae)),g&&(x(h),N.current.layout=h,l&&l(h),ut(c,h,y.current))}),[]),E=te(((e,t)=>{const{onLayout:n}=w.current,{layout:r,panelDataArray:a}=N.current,i=a.map((e=>e.constraints)),{panelSize:s,pivotIndices:l}=St(a,e,r);qe(null!=s,`Panel size not found for panel "${e.id}"`);const o=et({delta:Nt(a,e)===a.length-1?s-t:t-s,initialLayout:r,panelConstraints:i,pivotIndices:l,prevLayout:r,trigger:"imperative-api"});mt(r,o)||(x(o),N.current.layout=o,n&&n(o),ut(a,o,y.current))}),[]),M=te(((e,t)=>{const{layout:n,panelDataArray:r}=N.current,{collapsedSize:a=0,collapsible:i}=t,{collapsedSize:s=0,collapsible:l,maxSize:o=100,minSize:c=0}=e.constraints,{panelSize:d}=St(r,e,n);null!=d&&(i&&l&&Xe(d,a)?Xe(a,s)||E(e,s):d<c?E(e,c):d>o&&E(e,o))}),[E]),A=te(((e,t)=>{const{direction:n}=w.current,{layout:r}=N.current;if(!p.current)return;const a=st(e,p.current);qe(a,`Drag handle element not found for id "${e}"`);const i=ct(n,t);h({dragHandleId:e,dragHandleRect:a.getBoundingClientRect(),initialCursorPosition:i,initialLayout:r})}),[]),$=te((()=>{h(null)}),[]),F=te((e=>{const{panelDataArray:t}=N.current,n=Nt(t,e);n>=0&&(t.splice(n,1),delete y.current[e.id],N.current.panelDataArrayChanged=!0,v())}),[v]),R=se((()=>({collapsePanel:S,direction:r,dragState:f,expandPanel:k,getPanelSize:z,getPanelStyle:C,groupId:m,isPanelCollapsed:D,isPanelExpanded:I,reevaluatePanelConstraints:M,registerPanel:P,registerResizeHandle:L,resizePanel:E,startDragging:A,stopDragging:$,unregisterPanel:F,panelGroupElement:p.current})),[S,f,r,k,z,C,m,D,I,M,P,L,E,A,$,F]),_={display:"flex",flexDirection:"horizontal"===r?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return X(ue.Provider,{value:R},X(d,{...u,children:t,className:n,id:i,ref:p,style:{..._,...c},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":m}))}const wt=ee(((e,t)=>X(jt,{...e,forwardedRef:t})));function Nt(e,t){return e.findIndex((e=>e===t||e.id===t.id))}function St(e,t,n){const r=Nt(e,t),a=r===e.length-1?[r-1,r]:[r,r+1],i=n[r];return{...t.constraints,panelSize:i,pivotIndices:a}}function kt({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:a,onBlur:i,onDragging:s,onFocus:l,style:o={},tabIndex:c=0,tagName:d="div",...u}){var m,p;const f=le(null),h=le({onDragging:s});re((()=>{h.current.onDragging=s}));const g=ne(ue);if(null===g)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:x,groupId:v,registerResizeHandle:y,startDragging:b,stopDragging:j,panelGroupElement:w}=g,N=he(a),[S,k]=oe("inactive"),[z,C]=oe(!1),[D,I]=oe(null),P=le({state:S});me((()=>{P.current.state=S})),re((()=>{if(n)I(null);else{const e=y(N);I((()=>e))}}),[n,N,y]);const L=null!==(m=null==r?void 0:r.coarse)&&void 0!==m?m:15,E=null!==(p=null==r?void 0:r.fine)&&void 0!==p?p:5;re((()=>{if(n||null==D)return;const e=f.current;qe(e,"Element ref not attached");return function(e,t,n,r,a){var i;const{ownerDocument:s}=t,l={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:a},o=null!==(i=_e.get(s))&&void 0!==i?i:0;return _e.set(s,o+1),He.add(l),We(),function(){var t;Be.delete(e),He.delete(l);const n=null!==(t=_e.get(s))&&void 0!==t?t:1;if(_e.set(s,n-1),We(),1===n&&_e.delete(s),Fe.includes(l)){const e=Fe.indexOf(l);e>=0&&Fe.splice(e,1),Ve(),a("up",!0,null)}}}(N,e,x,{coarse:L,fine:E},((e,t,n)=>{if(t)switch(e){case"down":{k("drag"),qe(n,'Expected event to be defined for "down" action'),b(N,n);const{onDragging:e}=h.current;e&&e(!0);break}case"move":{const{state:e}=P.current;"drag"!==e&&k("hover"),qe(n,'Expected event to be defined for "move" action'),D(n);break}case"up":{k("hover"),j();const{onDragging:e}=h.current;e&&e(!1);break}}else k("inactive")}))}),[L,x,n,E,y,N,D,b,j]),function({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){re((()=>{if(e||null==n||null==r)return;const a=st(t,r);if(null==a)return;const i=e=>{if(!e.defaultPrevented)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":e.preventDefault(),n(e);break;case"F6":{e.preventDefault();const n=a.getAttribute("data-panel-group-id");qe(n,`No group element found for id "${n}"`);const i=nt(n,r),s=rt(n,t,r);qe(null!==s,`No resize element found for id "${t}"`),i[e.shiftKey?s>0?s-1:i.length-1:s+1<i.length?s+1:0].focus();break}}};return a.addEventListener("keydown",i),()=>{a.removeEventListener("keydown",i)}}),[r,e,t,n])}({disabled:n,handleId:N,resizeHandler:D,panelGroupElement:w});return X(d,{...u,children:e,className:t,id:a,onBlur:()=>{C(!1),null==i||i()},onFocus:()=>{C(!0),null==l||l()},ref:f,role:"separator",style:{touchAction:"none",userSelect:"none",...o},tabIndex:c,"data-panel-group-direction":x,"data-panel-group-id":v,"data-resize-handle":"","data-resize-handle-active":"drag"===S?"pointer":z?"keyboard":void 0,"data-resize-handle-state":S,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":N})}jt.displayName="PanelGroup",wt.displayName="forwardRef(PanelGroup)",kt.displayName="PanelResizeHandle";const zt=({className:t,...n})=>e.jsx(wt,{className:o("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n}),Ct=xe,Dt=({withHandle:t,className:n,...r})=>e.jsx(kt,{className:o("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...r,children:t&&e.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:e.jsx(W,{className:"h-2.5 w-2.5"})})});function It(e,t){const n=+R(e),[r,a]=[+R(t.start),+R(t.end)].sort(((e,t)=>e-t));return n>=r&&n<=a}const Pt=(e,t)=>function(e){const t=R(e.start),n=R(e.end);let r=+t>+n;const a=r?+t:+n,i=r?n:t;i.setHours(0,0,0,0);const s=[];for(;+i<=a;)s.push(R(i)),i.setDate(i.getDate()+1),i.setHours(0,0,0,0);return r?s.reverse():s}({start:_(e),end:B(e)}).map((e=>{if(It(e,t)){const t=e.getDay();let n=0===t||6===t?{low:.1,medium:.3,high:.6}:{low:.5,medium:.3,high:.2};const r=Math.random();let a;a=r<n.low?"low":r<n.low+n.medium?"medium":"high";const i={low:8.99,medium:10.99,high:13.99},s={low:{min:10,max:50},medium:{min:51,max:150},high:{min:151,max:300}},l=Math.floor(Math.random()*(s[a].max-s[a].min+1)+s[a].min);return{date:e,loadFactor:a,basePrice:i[a],estimatedOrders:l}}return{date:e,loadFactor:"medium",basePrice:0,estimatedOrders:0}})),Lt=({date:t,currentMonth:n,pricingData:r,dateRange:a})=>{const i=((e,t)=>e.find((e=>H(e.date,t))))(r,t),s=It(t,a);let l="h-10 w-full p-0 font-normal flex flex-col items-center justify-center rounded hover:bg-gray-50 relative";if(O(t,n))if(s&&i){const e={low:"bg-green-50 hover:bg-green-100 border-green-200 text-green-800",medium:"bg-yellow-50 hover:bg-yellow-100 border-yellow-200 text-yellow-800",high:"bg-red-50 hover:bg-red-100 border-red-200 text-red-800"};i.basePrice>0?l+=` ${e[i.loadFactor]} border-b-2`:l+=" text-gray-400"}else l+=" text-gray-400";else l+=" text-gray-300 opacity-50";const o=i&&i.basePrice>0?"text-xs font-normal":"text-sm";return e.jsxs("div",{className:l,children:[e.jsx("span",{className:o,children:T(t,"d")}),s&&i&&i.basePrice>0&&e.jsx("span",{className:"text-[11px] font-medium",children:(c=i.basePrice,new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(c))}),s&&i&&i.basePrice>0&&"low"===i.loadFactor&&e.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"w-5 h-0.5 border-b border-dashed border-green-500"})})]});var c},Et=({currentMonth:t,setCurrentMonth:n,pricingData:r,isLoading:a,dateRange:i})=>{const{t:s}=c();return e.jsxs(d,{className:"h-full bg-white border border-gray-100 shadow-sm",children:[e.jsxs(u,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx("div",{className:"flex items-center space-x-2"}),e.jsx(m,{children:e.jsxs(p,{children:[e.jsx(f,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500",children:e.jsx(g,{className:"h-4 w-4"})})}),e.jsx(x,{className:"max-w-xs",children:e.jsx("p",{children:s("shipping.priceCalendarInfo","Shipping rates vary based on demand. Green indicates lower prices, yellow for medium, and red for premium rates.")})})]})})]}),e.jsx(v,{children:a?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):e.jsx("div",{className:"flex justify-center items-center transform origin-center pb-8",children:e.jsx(G,{mode:"single",month:t,onMonthChange:n,className:"mx-auto rounded-md border-0 w-full max-w-[90%] pointer-events-auto flex flex-col items-center",showOutsideDays:!0,components:{Day:({date:n,...a})=>e.jsx("div",{...a,children:n&&e.jsx(Lt,{date:n,currentMonth:t,pricingData:r,dateRange:i})})}})})})]})},Mt=({customerType:t})=>{const{isSignedIn:s,user:o}=y();n();const c=r(),[m,p]=a.useState("5"),[f,g]=a.useState("20"),[x,D]=a.useState("15"),[E,M]=a.useState("10"),[A,$]=a.useState("Stockholm, SE"),[F,R]=a.useState("112 23"),[_,B]=a.useState("Helsinki, FI"),[H,O]=a.useState("00341"),[G,W]=a.useState("standard"),[Y,X]=a.useState(!1);a.useState(!1);const[Z,Q]=a.useState(!1),[ee,te]=a.useState(null),[ne,re]=a.useState(t||"private"),[ae,ie]=a.useState(""),[se,le]=a.useState(""),[oe,ce]=a.useState(!1),[de,ue]=a.useState(!1),[me,pe]=a.useState("en"),[fe,he]=a.useState(!1),[ge,xe]=a.useState("SE"),[ve,ye]=a.useState("FI");a.useState("package"),a.useState("1");const[be,je]=a.useState(1),[we,Ne]=a.useState(""),[Se,ke]=a.useState(""),[ze,Ce]=a.useState(""),[De,Ie]=a.useState(""),[Pe,Le]=a.useState(""),[Ee,Me]=a.useState(""),[Ae,$e]=a.useState(""),[Fe,Re]=a.useState(""),[_e,Be]=a.useState("m"),[He,Oe]=a.useState(null),[Te,Ge]=a.useState(null),[Je,Ue]=a.useState(new Date),[Ve,We]=a.useState([]),[Ye,qe]=a.useState(!1),Ke=new Date,Xe={start:Ke,end:J(Ke,30)};a.useEffect((()=>{(async()=>{if(s&&o){const e=localStorage.getItem("lastBooking");if(e){const{trackingCode:t,timestamp:n}=JSON.parse(e),r=await P(t,o.id);if(r){te(r),ce(!0);const e=new Date(r.cancellation_deadline);new Date<e?ue(!0):(localStorage.removeItem("lastBooking"),ue(!1))}else localStorage.removeItem("lastBooking")}}})()}),[s,o]),a.useEffect((()=>{"cheap"===He&&(qe(!0),setTimeout((()=>{const e=Pt(Je,Xe);We(e),qe(!1)}),800))}),[He,Je]);const Ze={id:1,name:"E-Parcel Nordic",price:(()=>{switch(_e){case"xxs":return 5.9;case"s":return 7.9;case"m":default:return 9.9;case"l":return 11.9;case"xl":return 19.9;case"xxl":return 39.9}})(),eta:"3 days",icon:"📦"},Qe=async()=>{if(!(null==ee?void 0:ee.trackingCode)&&!(null==ee?void 0:ee.tracking_code))return;const e=ee.trackingCode||ee.tracking_code;if(e&&(null==o?void 0:o.id))try{const t=await(async(e,t)=>{try{const n=JSON.parse(localStorage.getItem(`bookings_${t}`)||"[]"),r=n.findIndex((t=>t.tracking_code===e));if(-1===r)return!1;const a=n[r];return!!a.can_be_cancelled&&(a.status="cancelled",a.can_be_cancelled=!1,n[r]=a,localStorage.setItem(`bookings_${t}`,JSON.stringify(n)),!0)}catch(n){return!1}})(e,o.id);t?(ce(!1),te(null),ue(!1),localStorage.removeItem("lastBooking"),C({title:"Booking Cancelled",description:"Your booking has been successfully cancelled."})):C({title:"Cancellation Failed",description:"Unable to cancel booking. Please try again or contact support.",variant:"destructive"})}catch(t){C({title:"Cancellation Error",description:"An unexpected error occurred.",variant:"destructive"})}},et=()=>{je(be+1)},tt=()=>{je(be-1)},nt=async()=>{if(!ee)return;const e=ee.trackingCode||ee.tracking_code,t=ee.shipmentId||"SHIP-"+Math.floor(1e6*Math.random());if(e){he(!0);try{const n=`${f}x${x}x${E} cm`,r=await L({shipmentId:t,carrierName:ee.carrier_name||"E-Parcel",trackingCode:e,senderAddress:A,recipientAddress:_,packageDetails:{weight:m,dimensions:n},language:me});r.success?(ee.labelUrl||te({...ee,labelUrl:r.labelUrl}),window.open(r.labelUrl,"_blank"),C({title:"Label Generated",description:"Label has been generated in "+("en"===me?"English":"fi"===me?"Finnish":"sv"===me?"Swedish":"no"===me?"Norwegian":"Danish")})):C({title:"Label Generation Failed",description:r.message||"Unable to generate shipping label",variant:"destructive"})}catch(n){C({title:"Label Generation Error",description:"An unexpected error occurred",variant:"destructive"})}finally{he(!1)}}else C({title:"Error",description:"Unable to generate label: missing tracking code",variant:"destructive"})};return oe?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(b,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(d,{className:"max-w-4xl mx-auto",children:[e.jsx(u,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-6 w-6 text-primary"}),"Booking Confirmed"]})}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-green-800 mb-4",children:"Your shipment is booked!"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tracking Code"}),e.jsx("p",{className:"text-lg font-mono font-medium",children:(null==ee?void 0:ee.trackingCode)||(null==ee?void 0:ee.tracking_code)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Carrier"}),e.jsx("p",{className:"text-lg font-medium",children:(null==ee?void 0:ee.carrier_name)||Ze.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Price"}),e.jsxs("p",{className:"text-lg font-medium",children:["€",(null==ee?void 0:ee.totalPrice)||(null==ee?void 0:ee.total_price)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Estimated Delivery"}),e.jsx("p",{className:"text-lg font-medium",children:Ze.eta})]}),(null==ee?void 0:ee.poolingEnabled)&&(null==ee?void 0:ee.deliveryDate)&&e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Scheduled Delivery Date"}),e.jsx("p",{className:"text-lg font-medium",children:new Date(ee.deliveryDate).toLocaleDateString()}),e.jsx("p",{className:"text-sm text-green-600",children:e.jsxs("span",{className:"inline-flex items-center",children:[e.jsxs("svg",{className:"w-4 h-4 mr-1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 10L12 14L8 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Low-cost shipping date selected"]})})]})]}),e.jsxs("div",{className:"mt-6 border-t border-green-200 pt-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Shipping Label"}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(K,{value:me,onChange:pe})}),e.jsxs(h,{variant:"outline",className:"flex items-center gap-2",onClick:nt,disabled:fe,children:[e.jsx(I,{className:"h-4 w-4"}),fe?"Generating...":"Generate & Download Label"]})]})]})]}),de&&e.jsxs("div",{className:"border border-amber-200 rounded-lg p-4 bg-amber-50",children:[e.jsx("h3",{className:"font-medium text-amber-800 mb-2",children:"Need to cancel?"}),e.jsxs("p",{className:"text-sm text-amber-700 mb-4",children:["You can cancel this booking until:",e.jsx("span",{className:"font-medium block",children:new Date(ee.cancellationDeadline||ee.cancellation_deadline).toLocaleString()})]}),e.jsx(h,{variant:"outline",className:"text-red-600 border-red-200 hover:bg-red-50",onClick:Qe,children:"Cancel Booking"})]}),e.jsxs("div",{className:"flex justify-between gap-4 pt-4",children:[e.jsx(h,{variant:"outline",asChild:!0,children:e.jsx(i,{to:"/dashboard",children:"View All Shipments"})}),e.jsx(h,{onClick:()=>{ce(!1),te(null),localStorage.removeItem("lastBooking"),c("/shipment")},children:"Book Another Shipment"})]})]})]})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(b,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full "+(be>=1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.jsx("span",{className:"text-xs font-bold",children:"1"})}),e.jsx("h2",{className:"text-sm "+(be>=1?"font-medium":"text-muted-foreground"),children:"Grundläggande detaljer"}),e.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 h-px bg-border"}),e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full "+(be>=2?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.jsx("span",{className:"text-xs font-bold",children:"2"})}),e.jsx("span",{className:"text-sm "+(be>=2?"font-medium":"text-muted-foreground"),children:"Välj tjänst"}),e.jsx("div",{className:"flex-1 h-px bg-border"}),e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full "+(be>=3?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.jsx("span",{className:"text-xs font-bold",children:"3"})}),e.jsx("span",{className:"text-sm "+(be>=3?"font-medium":"text-muted-foreground"),children:"Adress"}),e.jsx("div",{className:"flex-1 h-px bg-border"}),e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full "+(be>=4?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.jsx("span",{className:"text-xs font-bold",children:"4"})}),e.jsx("span",{className:"text-sm "+(be>=4?"font-medium":"text-muted-foreground"),children:"Innehåll och referens"})]})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),(async()=>{var e;if(s&&o)if("cheap"!==He||Te){Q(!0);try{const e=await q({weight:m,dimensions:{length:f,width:x,height:E},pickup:{name:we,address:De,postalCode:F,city:"Stockholm",country:ge,phone:ze,email:Se},delivery:{name:Pe,address:Fe,postalCode:H,city:"Helsinki",country:ve,phone:Ae,email:Ee},carrier:{name:Ze.name,price:Ze.price},deliverySpeed:G,includeCompliance:Y,userId:o.id,customerType:ne||"private",businessName:"business"===ne||"ecommerce"===ne?ae:void 0,vatNumber:"business"===ne?se:void 0,pickupSlotId:"slot-1",poolingEnabled:"cheap"===He,deliveryDate:Te?Te.toISOString():void 0});e.success?(te(e),ce(!0),ue(!0),localStorage.setItem("lastBooking",JSON.stringify({trackingCode:e.trackingCode,timestamp:(new Date).toISOString()})),C({title:"Shipment Booked",description:`Your shipment has been booked with tracking code: ${e.trackingCode}`})):C({title:"Booking Failed",description:e.message||"There was a problem with your booking.",variant:"destructive"})}catch(t){C({title:"Booking Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{Q(!1)}}else C({title:"Select Delivery Date",description:"Please select a delivery date from the calendar",variant:"destructive"});else null==(e=document.querySelector("button.cl-userButtonTrigger"))||e.click()})()},children:[1===be&&e.jsxs("div",{children:[e.jsxs(zt,{direction:"horizontal",className:"min-h-[200px] rounded-lg border mb-8",children:[e.jsx(Ct,{defaultSize:50,children:e.jsxs("div",{className:"p-0",children:[e.jsx("div",{className:"bg-slate-700 text-white p-3 font-semibold",children:"Från"}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"fromCountry",children:"Land"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"fromCountry",className:"w-full h-10 pl-10 pr-4 rounded-md border border-input bg-background appearance-none cursor-pointer",value:ge,onChange:e=>xe(e.target.value),children:[e.jsx("option",{value:"SE",children:"Sverige"}),e.jsx("option",{value:"FI",children:"Finland"}),e.jsx("option",{value:"NO",children:"Norge"}),e.jsx("option",{value:"DK",children:"Danmark"})]}),e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:N(ge)}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"fromPostal",children:"Postnummer"}),e.jsx(S,{id:"fromPostal",placeholder:"Enter postal code",value:F,onChange:e=>R(e.target.value)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[F,", Stockholm"]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"fromCompany",name:"fromType",className:"h-4 w-4 rounded-full border-gray-300 text-primary focus:ring-primary"}),e.jsx(l,{htmlFor:"fromCompany",children:"Företag"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"fromPrivate",name:"fromType",className:"h-4 w-4 rounded-full border-gray-300 text-primary focus:ring-primary",defaultChecked:!0}),e.jsx(l,{htmlFor:"fromPrivate",children:"Privatperson"})]})]})]})]})}),e.jsx(Dt,{withHandle:!0,children:e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 p-2 rounded-full bg-slate-200 hover:bg-slate-300 cursor-pointer z-10",onClick:()=>{const e=A,t=F,n=ge;$(_),R(H),xe(ve),B(e),O(t),ye(n)},children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7 16L3 12M3 12L7 8M3 12H21M17 8L21 12M21 12L17 16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),e.jsx(Ct,{defaultSize:50,children:e.jsxs("div",{className:"p-0",children:[e.jsx("div",{className:"bg-slate-700 text-white p-3 font-semibold",children:"Till"}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"toCountry",children:"Land"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"toCountry",className:"w-full h-10 pl-10 pr-4 rounded-md border border-input bg-background appearance-none cursor-pointer",value:ve,onChange:e=>ye(e.target.value),children:[e.jsx("option",{value:"SE",children:"Sverige"}),e.jsx("option",{value:"FI",children:"Finland"}),e.jsx("option",{value:"NO",children:"Norge"}),e.jsx("option",{value:"DK",children:"Danmark"})]}),e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:N(ve)}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"toPostal",children:"Postnummer"}),e.jsx(S,{id:"toPostal",placeholder:"Enter postal code",value:H,onChange:e=>O(e.target.value)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[H,", Helsinki"]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"toCompany",name:"toType",className:"h-4 w-4 rounded-full border-gray-300 text-primary focus:ring-primary"}),e.jsx(l,{htmlFor:"toCompany",children:"Företag"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"toPrivate",name:"toType",className:"h-4 w-4 rounded-full border-gray-300 text-primary focus:ring-primary",defaultChecked:!0}),e.jsx(l,{htmlFor:"toPrivate",children:"Privatperson"})]})]})]})]})})]}),e.jsxs("div",{className:"border rounded-lg mb-8",children:[e.jsx("div",{className:"bg-slate-700 text-white p-3 font-semibold",children:"Leverans Alternativ"}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-md p-4 cursor-pointer transition-all "+("fast"===He?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-primary/50"),onClick:()=>Oe("fast"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center "+("fast"===He?"border-primary":"border-gray-300"),children:"fast"===He&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"})}),e.jsx("h3",{className:"font-medium text-lg",children:"Fast Delivery"})]}),e.jsxs("div",{className:"pl-8",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Standard leveranstid, leverans inom 3-5 arbetsdagar."}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(k,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-semibold",children:"Snabb och pålitlig"})]})]})]}),e.jsxs("div",{className:"border rounded-md p-4 cursor-pointer transition-all "+("cheap"===He?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-primary/50"),onClick:()=>Oe("cheap"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center "+("cheap"===He?"border-primary":"border-gray-300"),children:"cheap"===He&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"})}),e.jsx("h3",{className:"font-medium text-lg",children:"Cheap Delivery"})]}),e.jsxs("div",{className:"pl-8",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Miljövänlig och billigare leverans. Välj ett datum som passar dig."}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(z,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:"Spara pengar och miljön"})]})]})]})]}),"cheap"===He&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Välj ett leveransdatum (gröna dagar är billigare)"}),e.jsx("div",{className:"bg-white rounded-lg border p-1",children:e.jsx(Et,{currentMonth:Je,setCurrentMonth:Ue,pricingData:Ve,selectedDate:Te,onSelectDate:e=>{(e=>U(e,Ke)&&V(e,Xe.end))(e)&&Ge(e)},isLoading:Ye})}),Te&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsxs("p",{className:"text-sm font-medium",children:["Valt leveransdatum: ",T(Te,"yyyy-MM-dd"),(e=>{const t=Ve.find((t=>t.date.getDate()===e.getDate()&&t.date.getMonth()===e.getMonth()&&t.date.getFullYear()===e.getFullYear()));return"low"===(null==t?void 0:t.loadFactor)})(Te)&&e.jsx("span",{className:"ml-2 text-green-600",children:"(Lågpris dag - 15% rabatt)"})]})})]})})]})})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(h,{type:"button",variant:"outline",disabled:1===be,onClick:tt,children:"Tillbaka"}),e.jsx(h,{type:"button",onClick:et,disabled:!He||"cheap"===He&&!Te,children:"Nästa"})]})]}),2===be&&e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(h,{type:"button",variant:"outline",onClick:tt,children:"Tillbaka"}),e.jsx(h,{type:"button",onClick:et,children:"Nästa"})]})}),3===be&&e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(h,{type:"button",variant:"outline",onClick:tt,children:"Tillbaka"}),e.jsx(h,{type:"button",onClick:et,children:"Nästa"})]})}),4===be&&e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(h,{type:"button",variant:"outline",onClick:tt,children:"Tillbaka"}),e.jsx(h,{type:"submit",disabled:Z,children:Z?"Processing...":"Boka Nu"})]})})]})]})})]})};export{Mt as default};
