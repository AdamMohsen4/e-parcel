import{j as e}from"./ui-BUgdJNRx.js";import{L as n,b as t,d as r,u as a,r as s}from"./vendor-D4-GdBKu.js";import{c as i,L as l,C as o,a as d,b as c,P as u,d as p,B as m,e as h,g,I as x,u as f,f as v,h as y,N as b,J as j}from"./index-bKcygss5.js";import{s as N,D as k,g as S,a as w}from"./labelService-BFoQDpwH.js";import{S as C,a as z,b as P,c as L,d as I}from"./select-BQq0XyjY.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=i("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),A={},D=async e=>{try{if(!e.pickup||!e.delivery)return{success:!1,message:"Pickup and delivery addresses are required"};if(!e.userId)return{success:!1,message:"User ID is required"};const r=`SHIP-${Math.floor(1e6*Math.random())}`,a=`EP${Math.floor(1e7*Math.random())}FI`,s=(n=e.carrier.price,t=e.includeCompliance,n+(t?2:0)),i=`https://api.shipping.com/labels/${a}`,l=new Date;l.setHours(l.getHours()+2);const o=l.toISOString(),d=new Date;"express"===e.deliverySpeed?d.setDate(d.getDate()+1):"standard"===e.deliverySpeed?d.setDate(d.getDate()+3):d.setDate(d.getDate()+5);const c=d.toISOString(),u=new Date;u.setHours(u.getHours()+24);const p={id:r,tracking_code:a,user_id:e.userId,status:"pending",sender_address:"string"==typeof e.pickup?e.pickup:JSON.stringify(e.pickup),recipient_address:"string"==typeof e.delivery?e.delivery:JSON.stringify(e.delivery),package_weight:e.weight,package_dimensions:`${e.dimensions.length}x${e.dimensions.width}x${e.dimensions.height}`,carrier_name:e.carrier.name,total_price:s,cancellation_deadline:u.toISOString(),can_be_cancelled:!0,delivery_speed:e.deliverySpeed,compliance_included:e.includeCompliance,created_at:(new Date).toISOString(),shipment_id:r,customerType:e.customerType||"private",businessName:e.businessName,vatNumber:e.vatNumber};A[a]=p;await N(e,a,i,o,s,c,u);await new Promise((e=>setTimeout(e,1500)));const m=JSON.parse(localStorage.getItem(`bookings_${e.userId}`)||"[]");return m.push(p),localStorage.setItem(`bookings_${e.userId}`,JSON.stringify(m)),{success:!0,message:"Shipment booked successfully",shipmentId:r,trackingCode:a,totalPrice:s,cancellationDeadline:u.toISOString(),canBeCancelled:!0}}catch(r){return{success:!1,message:"Failed to book shipment"}}var n,t},M=({value:n,onChange:t})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"label-language",className:"text-sm font-medium",children:"Label Language"}),e.jsxs(C,{value:n,onValueChange:t,children:[e.jsx(z,{id:"label-language",className:"w-full bg-background border-input",children:e.jsx(P,{placeholder:"Select language"})}),e.jsxs(L,{children:[e.jsx(I,{value:"en",children:"English"}),e.jsx(I,{value:"fi",children:"Finnish"}),e.jsx(I,{value:"sv",children:"Swedish"}),e.jsx(I,{value:"no",children:"Norwegian"}),e.jsx(I,{value:"da",children:"Danish"})]})]})]}),F=({bookingResult:t,carrier:r,canCancelBooking:a,labelLanguage:s,setLabelLanguage:i,isGeneratingLabel:l,handleGenerateLabel:h,handleCancelBooking:g,onBookAnother:x})=>e.jsxs(o,{className:"max-w-4xl mx-auto",children:[e.jsx(d,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-6 w-6 text-primary"}),"Booking Confirmed"]})}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-green-800 mb-4",children:"Your shipment is booked!"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tracking Code"}),e.jsx("p",{className:"text-lg font-mono font-medium",children:(null==t?void 0:t.trackingCode)||(null==t?void 0:t.tracking_code)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Carrier"}),e.jsx("p",{className:"text-lg font-medium",children:(null==t?void 0:t.carrier_name)||r.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Price"}),e.jsxs("p",{className:"text-lg font-medium",children:["€",(null==t?void 0:t.totalPrice)||(null==t?void 0:t.total_price)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Estimated Delivery"}),e.jsx("p",{className:"text-lg font-medium",children:r.eta})]})]}),e.jsxs("div",{className:"mt-6 border-t border-green-200 pt-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Shipping Label"}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(M,{value:s,onChange:i})}),e.jsxs(m,{variant:"outline",className:"flex items-center gap-2",onClick:h,disabled:l,children:[e.jsx(k,{className:"h-4 w-4"}),l?"Generating...":"Generate & Download Label"]})]})]})]}),a&&e.jsxs("div",{className:"border border-amber-200 rounded-lg p-4 bg-amber-50",children:[e.jsx("h3",{className:"font-medium text-amber-800 mb-2",children:"Need to cancel?"}),e.jsxs("p",{className:"text-sm text-amber-700 mb-4",children:["You can cancel this booking until:",e.jsx("span",{className:"font-medium block",children:new Date(t.cancellationDeadline||t.cancellation_deadline).toLocaleString()})]}),e.jsx(m,{variant:"outline",className:"text-red-600 border-red-200 hover:bg-red-50",onClick:g,children:"Cancel Booking"})]}),e.jsxs("div",{className:"flex justify-between gap-4 pt-4",children:[e.jsx(m,{variant:"outline",asChild:!0,children:e.jsx(n,{to:"/dashboard",children:"View All Shipments"})}),e.jsx(m,{onClick:x,children:"Book Another Shipment"})]})]})]}),$=({currentStep:n})=>e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full "+(n>=1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.jsx("span",{className:"text-xs font-bold",children:"1"})}),e.jsx("h2",{className:"text-sm "+(n>=1?"font-medium":"text-muted-foreground"),children:"Grundläggande detaljer"}),e.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 h-px bg-border"}),e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full "+(n>=2?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.jsx("span",{className:"text-xs font-bold",children:"2"})}),e.jsx("span",{className:"text-sm "+(n>=2?"font-medium":"text-muted-foreground"),children:"Adress"})]})]}),{createElement:R,createContext:B,createRef:T,forwardRef:_,useCallback:H,useContext:O,useEffect:G,useImperativeHandle:V,useLayoutEffect:q,useMemo:W,useRef:J,useState:U}=t,X=t[`useId${Math.random()}`.slice(0,5)],Y=q,K=B(null);K.displayName="PanelGroupContext";const Z=Y,Q="function"==typeof X?X:()=>null;let ee=0;function ne(e=null){const n=Q(),t=J(e||n||null);return null===t.current&&(t.current=""+ee++),null!=e?e:t.current}function te({children:e,className:n="",collapsedSize:t,collapsible:r,defaultSize:a,forwardedRef:s,id:i,maxSize:l,minSize:o,onCollapse:d,onExpand:c,onResize:u,order:p,style:m,tagName:h="div",...g}){const x=O(K);if(null===x)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:f,expandPanel:v,getPanelSize:y,getPanelStyle:b,groupId:j,isPanelCollapsed:N,reevaluatePanelConstraints:k,registerPanel:S,resizePanel:w,unregisterPanel:C}=x,z=ne(i),P=J({callbacks:{onCollapse:d,onExpand:c,onResize:u},constraints:{collapsedSize:t,collapsible:r,defaultSize:a,maxSize:l,minSize:o},id:z,idIsFromProps:void 0!==i,order:p});J({didLogMissingDefaultSizeWarning:!1}),Z((()=>{const{callbacks:e,constraints:n}=P.current,s={...n};P.current.id=z,P.current.idIsFromProps=void 0!==i,P.current.order=p,e.onCollapse=d,e.onExpand=c,e.onResize=u,n.collapsedSize=t,n.collapsible=r,n.defaultSize=a,n.maxSize=l,n.minSize=o,s.collapsedSize===n.collapsedSize&&s.collapsible===n.collapsible&&s.maxSize===n.maxSize&&s.minSize===n.minSize||k(P.current,s)})),Z((()=>{const e=P.current;return S(e),()=>{C(e)}}),[p,z,S,C]),V(s,(()=>({collapse:()=>{f(P.current)},expand:e=>{v(P.current,e)},getId:()=>z,getSize:()=>y(P.current),isCollapsed:()=>N(P.current),isExpanded:()=>!N(P.current),resize:e=>{w(P.current,e)}})),[f,v,y,N,z,w]);const L=b(P.current,a);return R(h,{...g,children:e,className:n,id:i,style:{...L,...m},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":j,"data-panel-id":z,"data-panel-size":parseFloat(""+L.flexGrow).toFixed(1)})}const re=_(((e,n)=>R(te,{...e,forwardedRef:n})));te.displayName="Panel",re.displayName="forwardRef(Panel)";let ae=null,se=null;function ie(e,n){const t=function(e,n){if(n){const e=!!(n&ye),t=!!(n&be);if(n&fe)return e?"se-resize":t?"ne-resize":"e-resize";if(n&ve)return e?"sw-resize":t?"nw-resize":"w-resize";if(e)return"s-resize";if(t)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,n);ae!==t&&(ae=t,null===se&&(se=document.createElement("style"),document.head.appendChild(se)),se.innerHTML=`*{cursor: ${t}!important;}`)}function le(e){return"keydown"===e.type}function oe(e){return e.type.startsWith("pointer")}function de(e){return e.type.startsWith("mouse")}function ce(e){if(oe(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(de(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}const ue=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function pe(e){const n=getComputedStyle(e);return"fixed"===n.position||(!("auto"===n.zIndex||"static"===n.position&&!function(e){var n;const t=getComputedStyle(null!==(n=xe(e))&&void 0!==n?n:e).display;return"flex"===t||"inline-flex"===t}(e))||(+n.opacity<1||("transform"in n&&"none"!==n.transform||("webkitTransform"in n&&"none"!==n.webkitTransform||("mixBlendMode"in n&&"normal"!==n.mixBlendMode||("filter"in n&&"none"!==n.filter||("webkitFilter"in n&&"none"!==n.webkitFilter||("isolation"in n&&"isolate"===n.isolation||(!!ue.test(n.willChange)||"touch"===n.webkitOverflowScrolling)))))))))}function me(e){let n=e.length;for(;n--;){const t=e[n];if(Fe(t,"Missing node"),pe(t))return t}return null}function he(e){return e&&Number(getComputedStyle(e).zIndex)||0}function ge(e){const n=[];for(;e;)n.push(e),e=xe(e);return n}function xe(e){const{parentNode:n}=e;return n&&n instanceof ShadowRoot?n.host:n}const fe=1,ve=2,ye=4,be=8,je="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}();let Ne=[],ke=!1,Se=new Map,we=new Map;const Ce=new Set;function ze(e){const{target:n}=e,{x:t,y:r}=ce(e);ke=!0,Ie({target:n,x:t,y:r}),De(),Ne.length>0&&(Me("down",e),e.preventDefault(),e.stopPropagation())}function Pe(e){const{x:n,y:t}=ce(e);if(ke&&0===e.buttons&&(ke=!1,Me("up",e)),!ke){const{target:r}=e;Ie({target:r,x:n,y:t})}Me("move",e),Ae(),Ne.length>0&&e.preventDefault()}function Le(e){const{target:n}=e,{x:t,y:r}=ce(e);we.clear(),ke=!1,Ne.length>0&&e.preventDefault(),Me("up",e),Ie({target:n,x:t,y:r}),Ae(),De()}function Ie({target:e,x:n,y:t}){Ne.splice(0);let r=null;e instanceof HTMLElement&&(r=e),Ce.forEach((e=>{const{element:a,hitAreaMargins:s}=e,i=a.getBoundingClientRect(),{bottom:l,left:o,right:d,top:c}=i,u=je?s.coarse:s.fine;if(n>=o-u&&n<=d+u&&t>=c-u&&t<=l+u){if(null!==r&&document.contains(r)&&a!==r&&!a.contains(r)&&!r.contains(a)&&function(e,n){if(e===n)throw new Error("Cannot compare node with itself");const t={a:ge(e),b:ge(n)};let r;for(;t.a.at(-1)===t.b.at(-1);)e=t.a.pop(),n=t.b.pop(),r=e;Fe(r,"Stacking order can only be calculated for elements with a common ancestor");const a=he(me(t.a)),s=he(me(t.b));if(a===s){const e=r.childNodes,n={a:t.a.at(-1),b:t.b.at(-1)};let a=e.length;for(;a--;){const t=e[a];if(t===n.a)return 1;if(t===n.b)return-1}}return Math.sign(a-s)}(r,a)>0){let e=r,n=!1;for(;e&&!e.contains(a);){if(p=e.getBoundingClientRect(),m=i,p.x<m.x+m.width&&p.x+p.width>m.x&&p.y<m.y+m.height&&p.y+p.height>m.y){n=!0;break}e=e.parentElement}if(n)return}Ne.push(e)}var p,m}))}function Ee(e,n){we.set(e,n)}function Ae(){let e=!1,n=!1;Ne.forEach((t=>{const{direction:r}=t;"horizontal"===r?e=!0:n=!0}));let t=0;we.forEach((e=>{t|=e})),e&&n?ie("intersection",t):e?ie("horizontal",t):n?ie("vertical",t):null!==se&&(document.head.removeChild(se),ae=null,se=null)}function De(){Se.forEach(((e,n)=>{const{body:t}=n;t.removeEventListener("contextmenu",Le),t.removeEventListener("pointerdown",ze),t.removeEventListener("pointerleave",Pe),t.removeEventListener("pointermove",Pe)})),window.removeEventListener("pointerup",Le),window.removeEventListener("pointercancel",Le),Ce.size>0&&(ke?(Ne.length>0&&Se.forEach(((e,n)=>{const{body:t}=n;e>0&&(t.addEventListener("contextmenu",Le),t.addEventListener("pointerleave",Pe),t.addEventListener("pointermove",Pe))})),window.addEventListener("pointerup",Le),window.addEventListener("pointercancel",Le)):Se.forEach(((e,n)=>{const{body:t}=n;e>0&&(t.addEventListener("pointerdown",ze,{capture:!0}),t.addEventListener("pointermove",Pe))})))}function Me(e,n){Ce.forEach((t=>{const{setResizeHandlerState:r}=t,a=Ne.includes(t);r(e,a,n)}))}function Fe(e,n){if(!e)throw Error(n)}function $e(e,n,t=10){return e.toFixed(t)===n.toFixed(t)?0:e>n?1:-1}function Re(e,n,t=10){return 0===$e(e,n,t)}function Be(e,n,t){return 0===$e(e,n,t)}function Te({panelConstraints:e,panelIndex:n,size:t}){const r=e[n];Fe(null!=r,`Panel constraints not found for index ${n}`);let{collapsedSize:a=0,collapsible:s,maxSize:i=100,minSize:l=0}=r;if($e(t,l)<0)if(s){t=$e(t,(a+l)/2)<0?a:l}else t=l;return t=Math.min(i,t),t=parseFloat(t.toFixed(10))}function _e({delta:e,initialLayout:n,panelConstraints:t,pivotIndices:r,prevLayout:a,trigger:s}){if(Be(e,0))return n;const i=[...n],[l,o]=r;Fe(null!=l,"Invalid first pivot index"),Fe(null!=o,"Invalid second pivot index");let d=0;if("keyboard"===s){{const r=e<0?o:l,a=t[r];Fe(a,`Panel constraints not found for index ${r}`);const{collapsedSize:s=0,collapsible:i,minSize:d=0}=a;if(i){const t=n[r];if(Fe(null!=t,`Previous layout not found for panel index ${r}`),Be(t,s)){const n=d-t;$e(n,Math.abs(e))>0&&(e=e<0?0-n:n)}}}{const r=e<0?l:o,a=t[r];Fe(a,`No panel constraints found for index ${r}`);const{collapsedSize:s=0,collapsible:i,minSize:d=0}=a;if(i){const t=n[r];if(Fe(null!=t,`Previous layout not found for panel index ${r}`),Be(t,d)){const n=t-s;$e(n,Math.abs(e))>0&&(e=e<0?0-n:n)}}}}{const r=e<0?1:-1;let a=e<0?o:l,s=0;for(;;){const e=n[a];Fe(null!=e,`Previous layout not found for panel index ${a}`);if(s+=Te({panelConstraints:t,panelIndex:a,size:100})-e,a+=r,a<0||a>=t.length)break}const i=Math.min(Math.abs(e),Math.abs(s));e=e<0?0-i:i}{let r=e<0?l:o;for(;r>=0&&r<t.length;){const a=Math.abs(e)-Math.abs(d),s=n[r];Fe(null!=s,`Previous layout not found for panel index ${r}`);const l=Te({panelConstraints:t,panelIndex:r,size:s-a});if(!Be(s,l)&&(d+=s-l,i[r]=l,d.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?r--:r++}}if(function(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!Be(e[r],n[r],t))return!1;return!0}(a,i))return a;{const r=e<0?o:l,a=n[r];Fe(null!=a,`Previous layout not found for panel index ${r}`);const s=a+d,c=Te({panelConstraints:t,panelIndex:r,size:s});if(i[r]=c,!Be(c,s)){let n=s-c;let r=e<0?o:l;for(;r>=0&&r<t.length;){const a=i[r];Fe(null!=a,`Previous layout not found for panel index ${r}`);const s=Te({panelConstraints:t,panelIndex:r,size:a+n});if(Be(a,s)||(n-=s-a,i[r]=s),Be(n,0))break;e>0?r--:r++}}}return Be(i.reduce(((e,n)=>n+e),0),100)?i:a}function He({layout:e,panelsArray:n,pivotIndices:t}){let r=0,a=100,s=0,i=0;const l=t[0];Fe(null!=l,"No pivot index found"),n.forEach(((e,n)=>{const{constraints:t}=e,{maxSize:o=100,minSize:d=0}=t;n===l?(r=d,a=o):(s+=d,i+=o)}));return{valueMax:Math.min(a,100-s),valueMin:Math.max(r,100-i),valueNow:e[l]}}function Oe(e,n=document){return Array.from(n.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function Ge(e,n,t=document){const r=Oe(e,t).findIndex((e=>e.getAttribute("data-panel-resize-handle-id")===n));return null!=r?r:null}function Ve(e,n,t){const r=Ge(e,n,t);return null!=r?[r,r+1]:[-1,-1]}function qe(e,n=document){var t;if(n instanceof HTMLElement&&(null==n||null===(t=n.dataset)||void 0===t?void 0:t.panelGroupId)==e)return n;const r=n.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function We(e,n=document){const t=n.querySelector(`[data-panel-resize-handle-id="${e}"]`);return t||null}function Je({committedValuesRef:e,eagerValuesRef:n,groupId:t,layout:r,panelDataArray:a,panelGroupElement:s,setLayout:i}){J({didWarnAboutMissingResizeHandle:!1}),Z((()=>{if(!s)return;const e=Oe(t,s);for(let n=0;n<a.length-1;n++){const{valueMax:t,valueMin:s,valueNow:i}=He({layout:r,panelsArray:a,pivotIndices:[n,n+1]}),l=e[n];if(null==l);else{const e=a[n];Fe(e,`No panel data found for index "${n}"`),l.setAttribute("aria-controls",e.id),l.setAttribute("aria-valuemax",""+Math.round(t)),l.setAttribute("aria-valuemin",""+Math.round(s)),l.setAttribute("aria-valuenow",null!=i?""+Math.round(i):"")}}return()=>{e.forEach(((e,n)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")}))}}),[t,r,a,s]),G((()=>{if(!s)return;const e=n.current;Fe(e,"Eager values not found");const{panelDataArray:a}=e;Fe(null!=qe(t,s),`No group found for id "${t}"`);const l=Oe(t,s);Fe(l,`No resize handles found for group id "${t}"`);const o=l.map((e=>{const n=e.getAttribute("data-panel-resize-handle-id");Fe(n,"Resize handle element has no handle id attribute");const[l,o]=function(e,n,t,r=document){var a,s,i,l;const o=We(n,r),d=Oe(e,r),c=o?d.indexOf(o):-1;return[null!==(a=null===(s=t[c])||void 0===s?void 0:s.id)&&void 0!==a?a:null,null!==(i=null===(l=t[c+1])||void 0===l?void 0:l.id)&&void 0!==i?i:null]}(t,n,a,s);if(null==l||null==o)return()=>{};const d=e=>{if(!e.defaultPrevented)switch(e.key){case"Enter":{e.preventDefault();const o=a.findIndex((e=>e.id===l));if(o>=0){const e=a[o];Fe(e,`No panel data found for index ${o}`);const l=r[o],{collapsedSize:d=0,collapsible:c,minSize:u=0}=e.constraints;if(null!=l&&c){const e=_e({delta:Be(l,d)?u-d:d-l,initialLayout:r,panelConstraints:a.map((e=>e.constraints)),pivotIndices:Ve(t,n,s),prevLayout:r,trigger:"keyboard"});r!==e&&i(e)}}break}}};return e.addEventListener("keydown",d),()=>{e.removeEventListener("keydown",d)}}));return()=>{o.forEach((e=>e()))}}),[s,e,n,t,r,a,i])}function Ue(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function Xe(e,n){const t="horizontal"===e,{x:r,y:a}=ce(n);return t?r:a}function Ye(e,n,t,r,a,s){if(le(e)){const n="horizontal"===t;let r=0;r=e.shiftKey?100:null!=a?a:10;let s=0;switch(e.key){case"ArrowDown":s=n?0:r;break;case"ArrowLeft":s=n?-r:0;break;case"ArrowRight":s=n?r:0;break;case"ArrowUp":s=n?0:-r;break;case"End":s=100;break;case"Home":s=-100}return s}return null==r?0:function(e,n,t,r,a){const s="horizontal"===t,i=We(n,a);Fe(i,`No resize handle element found for id "${n}"`);const l=i.getAttribute("data-panel-group-id");Fe(l,"Resize handle element has no group id attribute");let{initialCursorPosition:o}=r;const d=Xe(t,e),c=qe(l,a);Fe(c,`No group element found for id "${l}"`);const u=c.getBoundingClientRect();return(d-o)/(s?u.width:u.height)*100}(e,n,t,r,s)}function Ke(e,n,t){n.forEach(((n,r)=>{const a=e[r];Fe(a,`Panel data not found for index ${r}`);const{callbacks:s,constraints:i,id:l}=a,{collapsedSize:o=0,collapsible:d}=i,c=t[l];if(null==c||n!==c){t[l]=n;const{onCollapse:e,onExpand:r,onResize:a}=s;a&&a(n,c),d&&(e||r)&&(!r||null!=c&&!Re(c,o)||Re(n,o)||r(),!e||null!=c&&Re(c,o)||!Re(n,o)||e())}}))}function Ze(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!=n[t])return!1;return!0}function Qe(e){try{if("undefined"==typeof localStorage)throw new Error("localStorage not supported in this environment");e.getItem=e=>localStorage.getItem(e),e.setItem=(e,n)=>{localStorage.setItem(e,n)}}catch(n){e.getItem=()=>null,e.setItem=()=>{}}}function en(e){return`react-resizable-panels:${e}`}function nn(e){return e.map((e=>{const{constraints:n,id:t,idIsFromProps:r,order:a}=e;return r?t:a?`${a}:${JSON.stringify(n)}`:JSON.stringify(n)})).sort(((e,n)=>e.localeCompare(n))).join(",")}function tn(e,n){try{const t=en(e),r=n.getItem(t);if(r){const e=JSON.parse(r);if("object"==typeof e&&null!=e)return e}}catch(t){}return null}function rn(e,n,t,r,a){var s;const i=en(e),l=nn(n),o=null!==(s=tn(e,a))&&void 0!==s?s:{};o[l]={expandToSizes:Object.fromEntries(t.entries()),layout:r};try{a.setItem(i,JSON.stringify(o))}catch(d){}}function an({layout:e,panelConstraints:n}){const t=[...e],r=t.reduce(((e,n)=>e+n),0);if(t.length!==n.length)throw Error(`Invalid ${n.length} panel layout: ${t.map((e=>`${e}%`)).join(", ")}`);if(!Be(r,100)&&t.length>0)for(let s=0;s<n.length;s++){const e=t[s];Fe(null!=e,`No layout data found for index ${s}`);const n=100/r*e;t[s]=n}let a=0;for(let s=0;s<n.length;s++){const e=t[s];Fe(null!=e,`No layout data found for index ${s}`);const r=Te({panelConstraints:n,panelIndex:s,size:e});e!=r&&(a+=e-r,t[s]=r)}if(!Be(a,0))for(let s=0;s<n.length;s++){const e=t[s];Fe(null!=e,`No layout data found for index ${s}`);const r=Te({panelConstraints:n,panelIndex:s,size:e+a});if(e!==r&&(a-=r-e,t[s]=r,Be(a,0)))break}return t}const sn={getItem:e=>(Qe(sn),sn.getItem(e)),setItem:(e,n)=>{Qe(sn),sn.setItem(e,n)}},ln={};function on({autoSaveId:e=null,children:n,className:t="",direction:r,forwardedRef:a,id:s=null,onLayout:i=null,keyboardResizeBy:l=null,storage:o=sn,style:d,tagName:c="div",...u}){const p=ne(s),m=J(null),[h,g]=U(null),[x,f]=U([]),v=function(){const[e,n]=U(0);return H((()=>n((e=>e+1))),[])}(),y=J({}),b=J(new Map),j=J(0),N=J({autoSaveId:e,direction:r,dragState:h,id:p,keyboardResizeBy:l,onLayout:i,storage:o}),k=J({layout:x,panelDataArray:[],panelDataArrayChanged:!1});J({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),V(a,(()=>({getId:()=>N.current.id,getLayout:()=>{const{layout:e}=k.current;return e},setLayout:e=>{const{onLayout:n}=N.current,{layout:t,panelDataArray:r}=k.current,a=an({layout:e,panelConstraints:r.map((e=>e.constraints))});Ue(t,a)||(f(a),k.current.layout=a,n&&n(a),Ke(r,a,y.current))}})),[]),Z((()=>{N.current.autoSaveId=e,N.current.direction=r,N.current.dragState=h,N.current.id=p,N.current.onLayout=i,N.current.storage=o})),Je({committedValuesRef:N,eagerValuesRef:k,groupId:p,layout:x,panelDataArray:k.current.panelDataArray,setLayout:f,panelGroupElement:m.current}),G((()=>{const{panelDataArray:n}=k.current;if(e){if(0===x.length||x.length!==n.length)return;let t=ln[e];null==t&&(t=function(e,n=10){let t=null;return(...r)=>{null!==t&&clearTimeout(t),t=setTimeout((()=>{e(...r)}),n)}}(rn,100),ln[e]=t);const r=[...n],a=new Map(b.current);t(e,r,a,x,o)}}),[e,x,o]),G((()=>{}));const S=H((e=>{const{onLayout:n}=N.current,{layout:t,panelDataArray:r}=k.current;if(e.constraints.collapsible){const a=r.map((e=>e.constraints)),{collapsedSize:s=0,panelSize:i,pivotIndices:l}=un(r,e,t);if(Fe(null!=i,`Panel size not found for panel "${e.id}"`),!Re(i,s)){b.current.set(e.id,i);const o=_e({delta:cn(r,e)===r.length-1?i-s:s-i,initialLayout:t,panelConstraints:a,pivotIndices:l,prevLayout:t,trigger:"imperative-api"});Ze(t,o)||(f(o),k.current.layout=o,n&&n(o),Ke(r,o,y.current))}}}),[]),w=H(((e,n)=>{const{onLayout:t}=N.current,{layout:r,panelDataArray:a}=k.current;if(e.constraints.collapsible){const s=a.map((e=>e.constraints)),{collapsedSize:i=0,panelSize:l=0,minSize:o=0,pivotIndices:d}=un(a,e,r),c=null!=n?n:o;if(Re(l,i)){const n=b.current.get(e.id),i=null!=n&&n>=c?n:c,o=_e({delta:cn(a,e)===a.length-1?l-i:i-l,initialLayout:r,panelConstraints:s,pivotIndices:d,prevLayout:r,trigger:"imperative-api"});Ze(r,o)||(f(o),k.current.layout=o,t&&t(o),Ke(a,o,y.current))}}}),[]),C=H((e=>{const{layout:n,panelDataArray:t}=k.current,{panelSize:r}=un(t,e,n);return Fe(null!=r,`Panel size not found for panel "${e.id}"`),r}),[]),z=H(((e,n)=>{const{panelDataArray:t}=k.current,r=cn(t,e);return function({defaultSize:e,dragState:n,layout:t,panelData:r,panelIndex:a,precision:s=3}){const i=t[a];let l;return l=null==i?null!=e?e.toPrecision(s):"1":1===r.length?"1":i.toPrecision(s),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:null!==n?"none":void 0}}({defaultSize:n,dragState:h,layout:x,panelData:t,panelIndex:r})}),[h,x]),P=H((e=>{const{layout:n,panelDataArray:t}=k.current,{collapsedSize:r=0,collapsible:a,panelSize:s}=un(t,e,n);return Fe(null!=s,`Panel size not found for panel "${e.id}"`),!0===a&&Re(s,r)}),[]),L=H((e=>{const{layout:n,panelDataArray:t}=k.current,{collapsedSize:r=0,collapsible:a,panelSize:s}=un(t,e,n);return Fe(null!=s,`Panel size not found for panel "${e.id}"`),!a||$e(s,r)>0}),[]),I=H((e=>{const{panelDataArray:n}=k.current;n.push(e),n.sort(((e,n)=>{const t=e.order,r=n.order;return null==t&&null==r?0:null==t?-1:null==r?1:t-r})),k.current.panelDataArrayChanged=!0,v()}),[v]);Z((()=>{if(k.current.panelDataArrayChanged){k.current.panelDataArrayChanged=!1;const{autoSaveId:e,onLayout:n,storage:t}=N.current,{layout:r,panelDataArray:a}=k.current;let s=null;if(e){const n=function(e,n,t){var r,a;return null!==(a=(null!==(r=tn(e,t))&&void 0!==r?r:{})[nn(n)])&&void 0!==a?a:null}(e,a,t);n&&(b.current=new Map(Object.entries(n.expandToSizes)),s=n.layout)}null==s&&(s=function({panelDataArray:e}){const n=Array(e.length),t=e.map((e=>e.constraints));let r=0,a=100;for(let s=0;s<e.length;s++){const e=t[s];Fe(e,`Panel constraints not found for index ${s}`);const{defaultSize:i}=e;null!=i&&(r++,n[s]=i,a-=i)}for(let s=0;s<e.length;s++){const i=t[s];Fe(i,`Panel constraints not found for index ${s}`);const{defaultSize:l}=i;if(null!=l)continue;const o=a/(e.length-r);r++,n[s]=o,a-=o}return n}({panelDataArray:a}));const i=an({layout:s,panelConstraints:a.map((e=>e.constraints))});Ue(r,i)||(f(i),k.current.layout=i,n&&n(i),Ke(a,i,y.current))}})),Z((()=>{const e=k.current;return()=>{e.layout=[]}}),[]);const E=H((e=>function(n){n.preventDefault();const t=m.current;if(!t)return()=>null;const{direction:r,dragState:a,id:s,keyboardResizeBy:i,onLayout:l}=N.current,{layout:o,panelDataArray:d}=k.current,{initialLayout:c}=null!=a?a:{},u=Ve(s,e,t);let p=Ye(n,e,r,a,i,t);const h="horizontal"===r;"rtl"===document.dir&&h&&(p=-p);const g=_e({delta:p,initialLayout:null!=c?c:o,panelConstraints:d.map((e=>e.constraints)),pivotIndices:u,prevLayout:o,trigger:le(n)?"keyboard":"mouse-or-touch"}),x=!Ze(o,g);(oe(n)||de(n))&&j.current!=p&&(j.current=p,Ee(e,x||0===p?0:h?p<0?fe:ve:p<0?ye:be)),x&&(f(g),k.current.layout=g,l&&l(g),Ke(d,g,y.current))}),[]),A=H(((e,n)=>{const{onLayout:t}=N.current,{layout:r,panelDataArray:a}=k.current,s=a.map((e=>e.constraints)),{panelSize:i,pivotIndices:l}=un(a,e,r);Fe(null!=i,`Panel size not found for panel "${e.id}"`);const o=_e({delta:cn(a,e)===a.length-1?i-n:n-i,initialLayout:r,panelConstraints:s,pivotIndices:l,prevLayout:r,trigger:"imperative-api"});Ze(r,o)||(f(o),k.current.layout=o,t&&t(o),Ke(a,o,y.current))}),[]),D=H(((e,n)=>{const{layout:t,panelDataArray:r}=k.current,{collapsedSize:a=0,collapsible:s}=n,{collapsedSize:i=0,collapsible:l,maxSize:o=100,minSize:d=0}=e.constraints,{panelSize:c}=un(r,e,t);null!=c&&(s&&l&&Re(c,a)?Re(a,i)||A(e,i):c<d?A(e,d):c>o&&A(e,o))}),[A]),M=H(((e,n)=>{const{direction:t}=N.current,{layout:r}=k.current;if(!m.current)return;const a=We(e,m.current);Fe(a,`Drag handle element not found for id "${e}"`);const s=Xe(t,n);g({dragHandleId:e,dragHandleRect:a.getBoundingClientRect(),initialCursorPosition:s,initialLayout:r})}),[]),F=H((()=>{g(null)}),[]),$=H((e=>{const{panelDataArray:n}=k.current,t=cn(n,e);t>=0&&(n.splice(t,1),delete y.current[e.id],k.current.panelDataArrayChanged=!0,v())}),[v]),B=W((()=>({collapsePanel:S,direction:r,dragState:h,expandPanel:w,getPanelSize:C,getPanelStyle:z,groupId:p,isPanelCollapsed:P,isPanelExpanded:L,reevaluatePanelConstraints:D,registerPanel:I,registerResizeHandle:E,resizePanel:A,startDragging:M,stopDragging:F,unregisterPanel:$,panelGroupElement:m.current})),[S,h,r,w,C,z,p,P,L,D,I,E,A,M,F,$]),T={display:"flex",flexDirection:"horizontal"===r?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return R(K.Provider,{value:B},R(c,{...u,children:n,className:t,id:s,ref:m,style:{...T,...d},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":p}))}const dn=_(((e,n)=>R(on,{...e,forwardedRef:n})));function cn(e,n){return e.findIndex((e=>e===n||e.id===n.id))}function un(e,n,t){const r=cn(e,n),a=r===e.length-1?[r-1,r]:[r,r+1],s=t[r];return{...n.constraints,panelSize:s,pivotIndices:a}}function pn({children:e=null,className:n="",disabled:t=!1,hitAreaMargins:r,id:a,onBlur:s,onDragging:i,onFocus:l,style:o={},tabIndex:d=0,tagName:c="div",...u}){var p,m;const h=J(null),g=J({onDragging:i});G((()=>{g.current.onDragging=i}));const x=O(K);if(null===x)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,groupId:v,registerResizeHandle:y,startDragging:b,stopDragging:j,panelGroupElement:N}=x,k=ne(a),[S,w]=U("inactive"),[C,z]=U(!1),[P,L]=U(null),I=J({state:S});Z((()=>{I.current.state=S})),G((()=>{if(t)L(null);else{const e=y(k);L((()=>e))}}),[t,k,y]);const E=null!==(p=null==r?void 0:r.coarse)&&void 0!==p?p:15,A=null!==(m=null==r?void 0:r.fine)&&void 0!==m?m:5;G((()=>{if(t||null==P)return;const e=h.current;Fe(e,"Element ref not attached");return function(e,n,t,r,a){var s;const{ownerDocument:i}=n,l={direction:t,element:n,hitAreaMargins:r,setResizeHandlerState:a},o=null!==(s=Se.get(i))&&void 0!==s?s:0;return Se.set(i,o+1),Ce.add(l),De(),function(){var n;we.delete(e),Ce.delete(l);const t=null!==(n=Se.get(i))&&void 0!==n?n:1;if(Se.set(i,t-1),De(),1===t&&Se.delete(i),Ne.includes(l)){const e=Ne.indexOf(l);e>=0&&Ne.splice(e,1),Ae(),a("up",!0,null)}}}(k,e,f,{coarse:E,fine:A},((e,n,t)=>{if(n)switch(e){case"down":{w("drag"),Fe(t,'Expected event to be defined for "down" action'),b(k,t);const{onDragging:e}=g.current;e&&e(!0);break}case"move":{const{state:e}=I.current;"drag"!==e&&w("hover"),Fe(t,'Expected event to be defined for "move" action'),P(t);break}case"up":{w("hover"),j();const{onDragging:e}=g.current;e&&e(!1);break}}else w("inactive")}))}),[E,f,t,A,y,k,P,b,j]),function({disabled:e,handleId:n,resizeHandler:t,panelGroupElement:r}){G((()=>{if(e||null==t||null==r)return;const a=We(n,r);if(null==a)return;const s=e=>{if(!e.defaultPrevented)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":e.preventDefault(),t(e);break;case"F6":{e.preventDefault();const t=a.getAttribute("data-panel-group-id");Fe(t,`No group element found for id "${t}"`);const s=Oe(t,r),i=Ge(t,n,r);Fe(null!==i,`No resize element found for id "${n}"`),s[e.shiftKey?i>0?i-1:s.length-1:i+1<s.length?i+1:0].focus();break}}};return a.addEventListener("keydown",s),()=>{a.removeEventListener("keydown",s)}}),[r,e,n,t])}({disabled:t,handleId:k,resizeHandler:P,panelGroupElement:N});return R(c,{...u,children:e,className:n,id:a,onBlur:()=>{z(!1),null==s||s()},onFocus:()=>{z(!0),null==l||l()},ref:h,role:"separator",style:{touchAction:"none",userSelect:"none",...o},tabIndex:d,"data-panel-group-direction":f,"data-panel-group-id":v,"data-resize-handle":"","data-resize-handle-active":"drag"===S?"pointer":C?"keyboard":void 0,"data-resize-handle-state":S,"data-panel-resize-handle-enabled":!t,"data-panel-resize-handle-id":k})}on.displayName="PanelGroup",dn.displayName="forwardRef(PanelGroup)",pn.displayName="PanelResizeHandle";const mn=({className:n,...t})=>e.jsx(dn,{className:h("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",n),...t}),hn=re,gn=({withHandle:n,className:t,...r})=>e.jsx(pn,{className:h("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...r,children:n&&e.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:e.jsx(E,{className:"h-2.5 w-2.5"})})}),xn=({pickupCountry:n,setPickupCountry:t,pickupPostalCode:r,setPickupPostalCode:a,deliveryCountry:s,setDeliveryCountry:i,deliveryPostalCode:o,setDeliveryPostalCode:d,onSwapLocations:c})=>e.jsxs(mn,{direction:"horizontal",className:"min-h-[200px] rounded-lg border mb-8",children:[e.jsx(hn,{defaultSize:50,children:e.jsxs("div",{className:"p-0",children:[e.jsx("div",{className:"bg-slate-700 text-white p-3 font-semibold",children:"Från"}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"fromCountry",children:"Land"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"fromCountry",className:"w-full h-10 pl-10 pr-4 rounded-md border border-input bg-background appearance-none cursor-pointer",value:n,onChange:e=>t(e.target.value),children:[e.jsx("option",{value:"SE",children:"Sverige"}),e.jsx("option",{value:"FI",children:"Finland"}),e.jsx("option",{value:"NO",children:"Norge"}),e.jsx("option",{value:"DK",children:"Danmark"})]}),e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:g(n)}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"fromPostal",children:"Postnummer"}),e.jsx(x,{id:"fromPostal",placeholder:"Enter postal code",value:r,onChange:e=>a(e.target.value)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r,", Stockholm"]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"fromCompany",name:"fromType",className:"h-4 w-4 rounded-full border-gray-300 text-primary focus:ring-primary"}),e.jsx(l,{htmlFor:"fromCompany",children:"Företag"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"fromPrivate",name:"fromType",className:"h-4 w-4 rounded-full border-gray-300 text-primary focus:ring-primary",defaultChecked:!0}),e.jsx(l,{htmlFor:"fromPrivate",children:"Privatperson"})]})]})]})]})}),e.jsx(gn,{withHandle:!0,children:e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 p-2 rounded-full bg-slate-200 hover:bg-slate-300 cursor-pointer z-10",onClick:c,children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7 16L3 12M3 12L7 8M3 12H21M17 8L21 12M21 12L17 16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),e.jsx(hn,{defaultSize:50,children:e.jsxs("div",{className:"p-0",children:[e.jsx("div",{className:"bg-slate-700 text-white p-3 font-semibold",children:"Till"}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"toCountry",children:"Land"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"toCountry",className:"w-full h-10 pl-10 pr-4 rounded-md border border-input bg-background appearance-none cursor-pointer",value:s,onChange:e=>i(e.target.value),children:[e.jsx("option",{value:"SE",children:"Sverige"}),e.jsx("option",{value:"FI",children:"Finland"}),e.jsx("option",{value:"NO",children:"Norge"}),e.jsx("option",{value:"DK",children:"Danmark"})]}),e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:g(s)}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"toPostal",children:"Postnummer"}),e.jsx(x,{id:"toPostal",placeholder:"Enter postal code",value:o,onChange:e=>d(e.target.value)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o,", Helsinki"]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"toCompany",name:"toType",className:"h-4 w-4 rounded-full border-gray-300 text-primary focus:ring-primary"}),e.jsx(l,{htmlFor:"toCompany",children:"Företag"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"toPrivate",name:"toType",className:"h-4 w-4 rounded-full border-gray-300 text-primary focus:ring-primary",defaultChecked:!0}),e.jsx(l,{htmlFor:"toPrivate",children:"Privatperson"})]})]})]})]})})]}),fn=({selectedVolume:n,onVolumeSelect:t})=>{f();return e.jsxs("div",{className:"my-6",children:[e.jsx("h2",{className:"text-2xl font-medium mb-6",children:"Välj paketstorlek"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:"xxs",name:"Småpaket (XXS)",dimensions:"max. 3 x 25 x 35 cm, 2 kg",deliveryTime:"Framme inom 5 arbetsdagar",price:5.9},{id:"s",name:"S paket",dimensions:"max. 11 x 32 x 42 cm, 25 kg",deliveryTime:"Framme inom 1–3 arbetsdagar",price:7.9},{id:"m",name:"M paket",dimensions:"max. 19 x 36 x 60 cm, 25 kg",deliveryTime:"Framme inom 1–3 arbetsdagar",price:9.9},{id:"l",name:"L paket",dimensions:"max. 37 x 36 x 60 cm, 25 kg",deliveryTime:"Framme inom 1–3 arbetsdagar",price:11.9},{id:"xl",name:"XL paket",dimensions:"max. 100 x 60 x 40 cm, 25 kg",deliveryTime:"Framme inom 1–3 arbetsdagar",price:19.9},{id:"xxl",name:"XXL paket",dimensions:"Max 200 cm och längd + omkrets max 300 cm, max 25 kg",deliveryTime:"Framme inom 1–3 arbetsdagar",price:39.9}].map((r=>e.jsxs("div",{className:`\n              relative rounded-lg overflow-hidden cursor-pointer transition-all duration-200\n              ${n===r.id?"border-2 border-primary shadow-md":"border border-gray-200 hover:border-gray-300 hover:shadow-sm"}\n            `,onClick:()=>t(r.id),children:[r.badge&&e.jsx("div",{className:"absolute top-0 left-0 bg-slate-700 text-white text-xs py-1 px-2 rounded-br-md",children:r.badge}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium text-lg",children:r.name}),e.jsx("p",{className:"text-sm text-slate-600 my-2",children:r.dimensions}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:r.deliveryTime}),e.jsxs("div",{className:`\n                text-center py-2 px-4 rounded-full font-medium\n                ${n===r.id?"bg-primary text-white":"bg-blue-500 text-white"}\n              `,children:[r.price.toFixed(2)," €"]})]})]},r.id)))}),e.jsxs("div",{className:"mt-8 bg-slate-100 rounded-lg p-6",children:[e.jsx("h3",{className:"font-medium text-lg mb-4",children:"Osäker på paketets storlek?"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"Mät paketets bredd, höjd och djup. Fyll i informationen i fälten nedan för att få en storleksrekommendation för ditt paket."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",placeholder:"Bredd",className:"w-full border border-gray-300 rounded-lg py-2 px-4 pr-12"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500",children:"cm"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",placeholder:"Höjd",className:"w-full border border-gray-300 rounded-lg py-2 px-4 pr-12"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500",children:"cm"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",placeholder:"Djup",className:"w-full border border-gray-300 rounded-lg py-2 px-4 pr-12"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500",children:"cm"})]})]}),e.jsx("button",{className:"mt-4 border border-blue-500 text-blue-500 hover:bg-orange-50 rounded-full py-2 px-6 transition-colors",children:"Visa lämpliga storlekar"})]})]})},vn=({selectedVolume:n,setSelectedVolume:t})=>e.jsxs("div",{className:"border rounded-lg mb-8",children:[e.jsx("div",{className:"bg-slate-700 text-white p-3 font-semibold",children:"Ange sändningsdetaljer"}),e.jsx("div",{className:"p-6",children:e.jsx(fn,{selectedVolume:n,onVolumeSelect:t})})]}),yn=({senderName:n,setSenderName:t,senderEmail:r,setSenderEmail:a,senderPhone:s,setSenderPhone:i,senderAddress:o,setSenderAddress:d,recipientName:c,setRecipientName:u,recipientEmail:p,setRecipientEmail:m,recipientPhone:h,setRecipientPhone:g,recipientAddress:f,setRecipientAddress:v,pickupCountry:y,pickupPostalCode:b,deliveryCountry:j,deliveryPostalCode:N})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border rounded-lg mb-8",children:[e.jsx("div",{className:"bg-slate-700 text-white p-3 font-semibold",children:"Avsändare"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"senderName",children:"Namn"}),e.jsx(x,{id:"senderName",placeholder:"Avsändarens namn",value:n,onChange:e=>t(e.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"senderPhone",children:"Telefon"}),e.jsx(x,{id:"senderPhone",placeholder:"Telefonnummer",value:s,onChange:e=>i(e.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"senderEmail",children:"E-post"}),e.jsx(x,{id:"senderEmail",type:"email",placeholder:"E-postadress",value:r,onChange:e=>a(e.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"senderAddress",children:"Adress"}),e.jsx(x,{id:"senderAddress",placeholder:"Gatunamn, husnummer",value:o,onChange:e=>d(e.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"senderPostalCode",children:"Postnummer"}),e.jsx(x,{id:"senderPostalCode",value:b,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"senderCountry",children:"Land"}),e.jsx(x,{id:"senderCountry",value:y,disabled:!0})]})]})]})]}),e.jsxs("div",{className:"border rounded-lg mb-8",children:[e.jsx("div",{className:"bg-slate-700 text-white p-3 font-semibold",children:"Mottagare"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"recipientName",children:"Namn"}),e.jsx(x,{id:"recipientName",placeholder:"Mottagarens namn",value:c,onChange:e=>u(e.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"recipientPhone",children:"Telefon"}),e.jsx(x,{id:"recipientPhone",placeholder:"Telefonnummer",value:h,onChange:e=>g(e.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"recipientEmail",children:"E-post"}),e.jsx(x,{id:"recipientEmail",type:"email",placeholder:"E-postadress",value:p,onChange:e=>m(e.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"recipientAddress",children:"Adress"}),e.jsx(x,{id:"recipientAddress",placeholder:"Gatunamn, husnummer",value:f,onChange:e=>v(e.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"recipientPostalCode",children:"Postnummer"}),e.jsx(x,{id:"recipientPostalCode",value:N,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"recipientCountry",children:"Land"}),e.jsx(x,{id:"recipientCountry",value:j,disabled:!0})]})]})]})]})]}),bn=({senderName:n,senderAddress:t,pickupPostalCode:r,pickupCountry:a,recipientName:s,recipientAddress:i,deliveryPostalCode:l,deliveryCountry:o})=>e.jsxs("div",{className:"bg-slate-50 p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Sammanfattning"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-slate-200 p-3 rounded-md",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-slate-700",children:[e.jsx("path",{d:"M12 3L20 7.5V16.5L12 21L4 16.5V7.5L12 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 12L20 7.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 12V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 12L4 7.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 flex-1",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Från"}),e.jsx("p",{children:n}),e.jsx("p",{children:r}),e.jsx("p",{children:t||"Stockholm"}),e.jsx("p",{children:v(a)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Till"}),e.jsx("p",{children:s}),e.jsx("p",{children:l}),e.jsx("p",{children:i||"Helsinki"}),e.jsx("p",{children:v(o)})]})]})]})]}),jn=({customerType:n})=>{const{isSignedIn:t,user:i}=y();r();const l=a(),[o,d]=s.useState("5"),[c,u]=s.useState("20"),[p,h]=s.useState("15"),[g,x]=s.useState("10"),[f,v]=s.useState("Stockholm, SE"),[N,k]=s.useState("112 23"),[C,z]=s.useState("Helsinki, FI"),[P,L]=s.useState("00341"),[I,E]=s.useState("standard"),[A,M]=s.useState(!1),[R,B]=s.useState(!1),[T,_]=s.useState(null),[H,O]=s.useState(n||"private"),[G,V]=s.useState(""),[q,W]=s.useState(""),[J,U]=s.useState(!1),[X,Y]=s.useState(!1),[K,Z]=s.useState("en"),[Q,ee]=s.useState(!1),[ne,te]=s.useState("SE"),[re,ae]=s.useState("FI"),[se,ie]=s.useState(1),[le,oe]=s.useState(""),[de,ce]=s.useState(""),[ue,pe]=s.useState(""),[me,he]=s.useState(""),[ge,xe]=s.useState(""),[fe,ve]=s.useState(""),[ye,be]=s.useState(""),[je,Ne]=s.useState(""),[ke,Se]=s.useState("m");s.useEffect((()=>{(async()=>{if(t&&i){const e=localStorage.getItem("lastBooking");if(e){const{trackingCode:n,timestamp:t}=JSON.parse(e),r=await S(n,i.id);if(r){_(r),U(!0);const e=new Date(r.cancellation_deadline);new Date<e?Y(!0):(localStorage.removeItem("lastBooking"),Y(!1))}else localStorage.removeItem("lastBooking")}}})()}),[t,i]);const we={id:1,name:"E-Parcel Nordic",price:(()=>{switch(ke){case"xxs":return 5.9;case"s":return 7.9;case"m":default:return 9.9;case"l":return 11.9;case"xl":return 19.9;case"xxl":return 39.9}})(),eta:"3 days",icon:"📦"},Ce=async()=>{if(!(null==T?void 0:T.trackingCode)&&!(null==T?void 0:T.tracking_code))return;const e=T.trackingCode||T.tracking_code;if(e&&(null==i?void 0:i.id))try{const n=await(async(e,n)=>{try{const t=JSON.parse(localStorage.getItem(`bookings_${n}`)||"[]"),r=t.findIndex((n=>n.tracking_code===e));if(-1===r)return!1;const a=t[r];return!!a.can_be_cancelled&&(a.status="cancelled",a.can_be_cancelled=!1,t[r]=a,localStorage.setItem(`bookings_${n}`,JSON.stringify(t)),!0)}catch(t){return!1}})(e,i.id);n?(U(!1),_(null),Y(!1),localStorage.removeItem("lastBooking"),j.success("Your booking has been successfully cancelled.")):j.error("Unable to cancel booking. Please try again or contact support.")}catch(n){j.error("An unexpected error occurred.")}},ze=async()=>{if(!T)return;const e=T.trackingCode||T.tracking_code,n=T.shipmentId||"SHIP-"+Math.floor(1e6*Math.random());if(e){ee(!0);try{const t=`${c}x${p}x${g} cm`,r=await w({shipmentId:n,carrierName:T.carrier_name||"E-Parcel",trackingCode:e,senderAddress:f,recipientAddress:C,packageDetails:{weight:o,dimensions:t},language:K});if(r.success){T.labelUrl||_({...T,labelUrl:r.labelUrl}),window.open(r.labelUrl,"_blank");const e="en"===K?"English":"fi"===K?"Finnish":"sv"===K?"Swedish":"no"===K?"Norwegian":"Danish";j.success(`Label has been generated in ${e}`)}else j.error(r.message||"Unable to generate shipping label")}catch(t){j.error("An unexpected error occurred")}finally{ee(!1)}}else j.error("Unable to generate label: missing tracking code")};return J?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(b,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(F,{bookingResult:T,carrier:we,canCancelBooking:X,labelLanguage:K,setLabelLanguage:Z,isGeneratingLabel:Q,handleGenerateLabel:ze,handleCancelBooking:Ce,onBookAnother:()=>{U(!1),_(null),localStorage.removeItem("lastBooking"),l("/shipment")}})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(b,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx($,{currentStep:se}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),(async()=>{var e;if(t&&i){B(!0);try{const e={name:le,address:me,postalCode:N,city:"Stockholm",country:ne,phone:ue,email:de},n={name:ge,address:je,postalCode:P,city:"Helsinki",country:re,phone:ye,email:fe},t=await D({weight:o,dimensions:{length:c,width:p,height:g},pickup:e,delivery:n,carrier:{name:we.name,price:we.price},deliverySpeed:I,includeCompliance:A,userId:i.id,customerType:H||"private",businessName:"business"===H||"ecommerce"===H?G:void 0,vatNumber:"business"===H?q:void 0,pickupSlotId:"slot-1"});t.success?(_(t),U(!0),Y(!0),localStorage.setItem("lastBooking",JSON.stringify({trackingCode:t.trackingCode,timestamp:(new Date).toISOString()})),j.success(`Your shipment has been booked with tracking code: ${t.trackingCode}`)):j.error(t.message||"There was a problem with your booking.")}catch(n){j.error("An unexpected error occurred.")}finally{B(!1)}}else null==(e=document.querySelector("button.cl-userButtonTrigger"))||e.click()})()},children:[1===se&&e.jsxs("div",{children:[e.jsx(xn,{pickupCountry:ne,setPickupCountry:te,pickupPostalCode:N,setPickupPostalCode:k,deliveryCountry:re,setDeliveryCountry:ae,deliveryPostalCode:P,setDeliveryPostalCode:L,onSwapLocations:()=>{const e=f,n=N,t=ne;v(C),k(P),te(re),z(e),L(n),ae(t)}}),e.jsx(vn,{selectedVolume:ke,setSelectedVolume:Se}),e.jsx("div",{className:"flex justify-end",children:e.jsx(m,{type:"button",onClick:()=>{ie(se+1)},className:"bg-green-600 hover:bg-green-700 text-white",children:"Continue"})})]}),2===se&&e.jsxs("div",{children:[e.jsx(yn,{senderName:le,setSenderName:oe,senderEmail:de,setSenderEmail:ce,senderPhone:ue,setSenderPhone:pe,senderAddress:me,setSenderAddress:he,recipientName:ge,setRecipientName:xe,recipientEmail:fe,setRecipientEmail:ve,recipientPhone:ye,setRecipientPhone:be,recipientAddress:je,setRecipientAddress:Ne,pickupCountry:ne,pickupPostalCode:N,deliveryCountry:re,deliveryPostalCode:P}),e.jsx(bn,{senderName:le,senderAddress:me,pickupPostalCode:N,pickupCountry:ne,recipientName:ge,recipientAddress:je,deliveryPostalCode:P,deliveryCountry:re}),e.jsxs("div",{className:"flex justify-between gap-4 mt-6",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>{ie(se-1)},children:"Previous"}),e.jsx(m,{type:"submit",disabled:R,className:"bg-green-600 hover:bg-green-700 text-white",children:R?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Bearbetar..."]}):e.jsx("span",{className:"flex items-center gap-2",children:"Bekräfta bokning"})})]})]})]})]})})]})};export{jn as default};
